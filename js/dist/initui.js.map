{"version":3,"file":"initui.js","sources":["../src/initUI.js"],"sourcesContent":["import $ from 'jquery'\nimport Ajax from './ajax.js'\nimport Confirm from './confirm.js'\nimport Editor from './editor.js'\nimport Toast from './toast.js'\nimport Tool from './tool.js'\nimport Tree from './tree.js'\nimport Upload from './upload.js'\n\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\n\nconst NAME                = 'initUI'\nconst VERSION             = '1.0.0'\nconst DATA_KEY            = 'lyc.init'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_INFO            = `${DATA_KEY}.`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst Selector = {\n  MENU      : '[target=\"menu\"]',\n  TAB       : '[target=\"tab\"]',\n  SEARCH    : '[target=\"search\"]',\n  SELECT    : '[target=\"select\"]',\n  QUERY     : '[target=\"query\"]',\n  FORM      : '[target=\"form\"]',\n  AJAX      : '[target=\"ajax\"]',\n  HTML      : '[target=\"html\"]',\n  CLEAR     : '[target=\"clear\"]',\n  PAGE      : '[target=\"page\"]',\n  TREE      : '[target=\"tree\"]',\n  EDITOR    : '[target=\"editor\"]',\n  FILE      : '[target=\"file\"]',\n  TOOLTIP   : '[show=\"tooltip\"]',\n  ERROR_IMG : 'img[src-error]',\n\n  NAV_LIST_GROUP        : '.nav, .list-group',\n  ACTIVE                : '.active',\n  ACTIVE_UL             : '> li > .active'\n}\n\nconst Event = {\n  CLICK_QUERY       : `click.query${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_FORM        : `click.form${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_AJAX        : `click.ajax${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_DATA_API    : `click${EVENT_KEY}${DATA_API_KEY}`,\n  CHANGE_DATA_API   : `change${EVENT_KEY}${DATA_API_KEY}`,\n  ERROR_IMG         : `error.img${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  QUERY_MAIN     : '.query-main',\n  QUERY_DATA     : '.query-data',\n  MODAL_CONTENT  : '.modal-content',\n  PAGE_LINK      : '.page-link',\n  CHECK_ALL : '.chk-all',\n  CHECK     : '.chk',\n  ZTREE     : 'ztree',\n  WARN      : 'warn',\n  ACTIVE        : 'active'\n}\n\nconst Customer = {\n  CHECK          : 'chk',\n  CUSTOM         : 'cus',\n  BEFORE         : 'bef',\n  SUCCESS        : 'suc'\n}\n\nconst WinData = {\n  nextInit: 0,\n  nextHeight: 0,\n  winW: 767.98,\n  winM: 1024,\n  winH: 1200\n}\n\nconst DataKey = {\n  QUERY    :  `${DATA_INFO}query`,\n  TREE     :  'tree',\n  EDITOR   :  'editor',\n  FILE     :  'file'\n}\n\n/**\n * ------------------------------------------------------------------------\n *  初始化方法 init()\n *  @author lyc\n *  @date 2020年06月04日17:48:50\n * ------------------------------------------------------------------------\n */\n\nclass InitUI {\n  constructor(element) {\n    this._element = element\n    this.verifyJQuery()\n    // this.resizeWin()\n    this.imgError()\n    this.tooltip()\n    if (this.verifySelect2()) {\n      this.search()\n      this.select()\n    }\n    this.clear()\n    this.checkbox()\n    this.query()\n    this.form()\n    this.ajax()\n    this.html()\n    this.page()\n    this.tree()\n    this.file()\n    this.editor()\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  verifyJQuery() {\n    if (!$ || !$.fn) {\n      throw new TypeError('JQuery is not load, plz check out')\n    }\n  }\n\n  resizeWin() {\n    if (this._element !== document) {\n      return\n    }\n    $(window).on('resize', () => {\n      const winWidth = window.innerWidth\n      const $body = $('body')\n      const enlarged = 'enlarged'\n      // var sidebar = 'sidebar-enable';\n      if (winWidth > WinData.winM) {\n        $body.attr('class', '')\n      }\n      if (winWidth <= WinData.winM) {\n        $body.attr('class', enlarged)\n      }\n      if (winWidth <= WinData.winW) {\n        $body.attr('class', '')\n      }\n    })\n    $(window).trigger('resize')\n  }\n\n  // ----------------------------------------------------------------------\n  //  图片错误加载\n  // ----------------------------------------------------------------------\n  imgError() {\n    $(Selector.ERROR_IMG, this._element).each((index, element) => {\n      const $this = $(element)\n      let src = $this.attr('src')\n      $this.on(Event.ERROR_IMG, () => {\n        const attr = $this.attr('src-error')\n        if (!attr) {\n          src = '/img/user.png'\n        }\n        if (attr === 'user') {\n          src = '/img/user.png'\n        } else if (attr === 'img') {\n          src = '/img/img.png'\n        }\n        return $this.attr('src', src)\n      })\n      const error = $.Event(Event.ERROR_IMG)\n      return src && src !== window.location.href ? $this.attr('src', src) : $this.trigger(error)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  提示插件 需要tooltip.js\n  // ----------------------------------------------------------------------\n  tooltip() {\n    if ($.fn.tooltip) {\n      $(Selector.TOOLTIP, this._element).tooltip({\n        bgcolor : 'dark'\n      })\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  验证是否存在select2插件\n  //  给select2插件中文国际化\n  // ----------------------------------------------------------------------\n  verifySelect2() {\n    if (!$.fn.select2) {\n      // eslint-disable-next-line no-console\n      console.error('the select2 plugin do not loaded')\n      return false\n    }\n    if ($.fn.select2.amd) {\n      const e = $.fn.select2.amd\n      e.define('select2/i18n/zh-CN', [], () => ({\n        errorLoading() {\n          return '无法载入结果。'\n        },\n        inputTooLong(e) {\n          const t = e.input.length - e.maximum\n          const n = `请删除${t}个字符`\n          return n\n        },\n        inputTooShort(e) {\n          const t = e.minimum - e.input.length\n          const n = `请再输入至少${t}个字符`\n          return n\n        },\n        loadingMore() {\n          return '载入更多结果…'\n        },\n        maximumSelected(e) {\n          const t = `最多只能选择${e.maximum}个项目`\n          return t\n        },\n        noResults() {\n          return '未找到结果'\n        },\n        searching() {\n          return '搜索中…'\n        }\n      }))\n    }\n    return true\n  }\n\n  // ----------------------------------------------------------------------\n  //  select2插件ajax获取数据\n  // ----------------------------------------------------------------------\n  search() {\n    $(Selector.SEARCH, this._element).each((index, element) => {\n      const $this = $(element)\n      const id = $this.data('id')\n      const text = $this.data('text')\n      const op = {\n        placeholder :'请选择',\n        // allowClear : true,\n        ajax: {\n          url: $this.data('url'),\n          delay: 250,\n          data(params) {\n            let query = {\n              search: params.term\n            }\n            query = $.extend(query, $this.data())\n            return query\n          },\n          dataType: Ajax.JSON,\n          type: Ajax.POST,\n          processResults(result) {\n            let data = []\n            if (result.data) {\n              data = $.map(result.data, (obj) => {\n                obj.text = obj.text || obj.name\n                return obj\n              })\n            }\n            return {\n              results: data\n            }\n          }\n        },\n        templateSelection: formatState,\n        templateResult: formatState,\n        minimumInputLength: 0,\n        maximumSelectionLength: 100\n      }\n      function formatState(state) {\n        const pattern = /<(?:[^\"'>]|\"[^\"]*\"|'[^']*')*>/g\n        if (!state.id) {\n          return state.text\n        }\n        return state.text && pattern.test(state.text) ? $(state.text) : state.text\n      }\n      $this.select2(op)\n      if ($this.hasClass('select2-hidden-accessible') && id) {\n        const option = new Option(text, id, true, true)\n        $this.append(option).trigger('change')\n      }\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  select2前台数据(相当于原生select)\n  //  目的在于统一样式\n  // ----------------------------------------------------------------------\n  select() {\n    $(Selector.SELECT, this._element).each((index, element) => {\n      $(element).select2({\n        minimumResultsForSearch: Infinity\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  重置form表单元素\n  // ----------------------------------------------------------------------\n  clear() {\n    $(Selector.CLEAR, this._element).on(Event.CLICK_DATA_API, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.QUERY_MAIN).find('form').length !== 0) {\n        $form = $this.closest(ClassName.QUERY_MAIN).find('form')\n      } else if ($this.closest(ClassName.MODAL_CONTENT).find('form').length !== 0) {\n        $form = $this.closest(ClassName.MODAL_CONTENT).find('form')\n      } else {\n        return\n      }\n      const attrs = $form.find('input,select,textarea')\n      attrs.each((index, element) => {\n        const $this = $(element)\n        if ($this.hasClass('select2-hidden-accessible')) {\n          const target = $this.attr('target')\n          if (target === 'search') {\n            return $this.empty()\n          }\n          if (target === 'select') {\n            return $this.select2('val', ' ')// 预留空格\n          }\n        }\n        return $this.val('')\n      })\n    })\n  }\n\n  checkbox() {\n    $(ClassName.CHECK_ALL, this._element).each((index, element) => {\n      const $this = $(element)\n      const $querydata = $this.closest(ClassName.QUERY_DATA)\n      const chks = $querydata.find('.chk')\n      $this.on(Event.CLICK_DATA_API, (event) => {\n        chks.prop('checked', $(event.target).prop('checked'))\n      })\n      chks.on(Event.CHANGE_DATA_API, () => {\n        const ischked = $querydata.find('.chk:checked')\n        if (ischked.length === 0) {\n          $this.prop('indeterminate', false)\n          $this.prop('checked', false)\n          return\n        }\n\n        if (ischked.length !== 0 && chks.length === ischked.length) {\n          $this.prop('indeterminate', false)\n          $this.prop('checked', true)\n          return\n        }\n        if (ischked.length !== 0 && chks.length !== ischked.length) {\n          $this.prop('indeterminate', true)\n        }\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  主页面查询表单控件\n  // ----------------------------------------------------------------------\n  query() {\n    $(Selector.QUERY, this._element).on(Event.CLICK_QUERY, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.QUERY_MAIN).find('form').length !== 0) {\n        $form = $this.closest(ClassName.QUERY_MAIN).find('form')\n      } else {\n        return\n      }\n      const config = {\n        ...$form.data(),\n        ...$this.data(),\n        ...{\n          url : $form.attr('action'),\n          data : Tool.formData($form),\n          type: Ajax.POST,\n          dataType: Ajax.HTML\n        }\n      }\n      $this.closest(ClassName.QUERY_MAIN).data(DataKey.QUERY)\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  用于form提交\n  // ----------------------------------------------------------------------\n  form() {\n    $(Selector.FORM, this._element).on(Event.CLICK_FORM, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.MODAL_CONTENT).find('form').length !== 0) {\n        $form = $this.closest(ClassName.MODAL_CONTENT).find('form')\n      } else {\n        return\n      }\n      const config = {\n        ...$form.data(),\n        ...$this.data(),\n        ...{\n          url : $form.attr('action'),\n          data : Tool.formData($form),\n          type: Ajax.POST,\n          dataType: Ajax.JSON\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  普通ajax交互\n  // ----------------------------------------------------------------------\n  ajax() {\n    $(Selector.AJAX, this._element).on(Event.CLICK_AJAX, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      const data = $this.data()\n      const config = {\n        ...data,\n        ...{\n          url : $this.attr('href') || $this.data('url'),\n          data,\n          type: Ajax.POST,\n          dataType: Ajax.JSON\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  ajax 返回html\n  // ----------------------------------------------------------------------\n  html() {\n    $(Selector.HTML, this._element).on(Event.CLICK_AJAX, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n\n      const listElement = $this.closest(Selector.NAV_LIST_GROUP)[0]\n      const activeElements = listElement && (listElement.nodeName === 'UL' || listElement.nodeName === 'OL')\n        ? $(listElement).find(Selector.ACTIVE_UL)\n        : $(listElement).children(Selector.ACTIVE)\n      if (activeElements) {\n        $(activeElements).removeClass(ClassName.ACTIVE)\n      }\n      $this.addClass(ClassName.ACTIVE)\n\n      const data = $this.data()\n      const config = {\n        ...data,\n        ...{\n          url : $this.attr('href') || $this.data('url'),\n          data,\n          type: Ajax.POST,\n          dataType: Ajax.HTML\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  分页器js处理\n  // ----------------------------------------------------------------------\n  page() {\n    $(Selector.PAGE, this._element).each((index, element)  => {\n      const $main = $(element).closest(ClassName.QUERY_MAIN)\n      const op = $main.data(DataKey.QUERY) || {\n        data :{}\n      }\n      $(element).find(ClassName.PAGE_LINK).on(Event.CHANGE_DATA_API, (event) => {\n        if (event) {\n          event.preventDefault()\n        }\n        const $this = $(event.target)\n        const pageNum = $this.data('pagenum')\n        op.data.pageNum = pageNum\n        Ajax.send(op)\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  tree js处理\n  // ----------------------------------------------------------------------\n  tree() {\n    $(Selector.TREE, this._element).each((_index, element)  => {\n      const tree = new Tree(element)\n      $(element).data(DataKey.TREE, tree)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  file js处理\n  // ----------------------------------------------------------------------\n  file() {\n    $(Selector.FILE, this._element).each((_index, element)  => {\n      const file = new Upload(element)\n      $(element).data(DataKey.FILE, file)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  富文本编辑器 js处理\n  // ----------------------------------------------------------------------\n  editor() {\n    $(Selector.EDITOR, this._element).each((index, element)  => {\n      const editor = Editor.init(element)\n      $(element).data(DataKey.EDITOR, editor)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  ajax默认success方法\n  // ----------------------------------------------------------------------\n  _suc($this, config, callback) {\n    if (config.dataType === Ajax.HTML) {\n      return function (result) {\n        if (!config.target) {\n          return\n        }\n        const $target = ($this.closest(ClassName.QUERY_MAIN) || document).find(`${config.target}:first`)\n        $target.html(result)\n        $target.data(DATA_KEY, new InitUI($target.html(result)[0]))\n        if (callback && typeof callback === 'function') {\n          callback($this, config)\n        }\n      }\n    }\n    return function (result) {\n      if (!result || typeof result !== 'object') {\n        return Toast.err('未知错误')\n      }\n      // 后台返回参数 result\n      const flag = result.result\n\n      if (callback && typeof callback === 'function') {\n        callback($this, config)\n      } else if (flag) {\n        if ($('#modal').length > 0) {\n          $('#modal').modal('hide')\n        }\n        if ($('#query').length > 0) {\n          $('#query').trigger('click')\n        }\n      }\n      return Toast[flag ? 'suc' : 'err'](result.message)\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  通用处理Customer中的事件\n  //  事件顺序:[chk , cus, bef ,suc]\n  // ----------------------------------------------------------------------\n  _ajaxUseful($this, config) {\n    const chk = Tool.eval(config[Customer.CHECK])\n    if (typeof chk === 'function') {\n      const flag = chk($this, config.data)\n      if (typeof flag === 'boolean' && !flag) {\n        return\n      }\n    }\n    // 自定义函数式  用于封装数据\n    const cus = Tool.eval(config[Customer.CUSTOM])\n    if (cus && typeof cus === 'object' && typeof cus.fuc === 'function') {\n      const rescus = cus.fuc.call($this[0], ...cus.args)\n      if (rescus && typeof rescus === 'object') {\n        config.data = {\n          ...config.data,\n          ...rescus\n        }\n      } else if (typeof rescus === 'boolean' && !rescus) {\n        return\n      } else {\n        return\n      }\n    }\n\n    const warn = config[ClassName.WARN]\n    if (warn) {\n      const confirm  = new Confirm(warn)\n      confirm.ok(() => this._ajaxUsefulMain($this, config)).show()\n    } else {\n      this._ajaxUsefulMain($this, config)\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  通用处理Customer中的事件\n  //  事件顺序:[chk , cus, bef ,suc]\n  // ----------------------------------------------------------------------\n  _ajaxUsefulMain($this, config) {\n    const bef = Tool.eval(config[Customer.BEFORE])\n    if (typeof bef === 'function') {\n      const obj = bef($this, config.data)\n      if (!bef) {\n        return\n      }\n      config.data = {\n        ...config.data,\n        ...typeof obj === 'object' && obj ? obj : {}\n      }\n    }\n    const suc = Tool.eval(config[Customer.SUCCESS])\n    config.success = this._suc($this, config, suc)\n    Ajax.send(config)\n  }\n\n  // ----------------------------------------------------------------------\n  //  默认启动方法init()\n  // ----------------------------------------------------------------------\n  static _init() {\n    return this.each(function () {\n      $(this).data(DATA_KEY, new InitUI(this))\n    })\n  }\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n$.fn[NAME] = InitUI._init\n$.fn[NAME].Constructor = InitUI\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return InitUI._init\n}\nexport default InitUI\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_INFO","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","Selector","MENU","TAB","SEARCH","SELECT","QUERY","FORM","AJAX","HTML","CLEAR","PAGE","TREE","EDITOR","FILE","TOOLTIP","ERROR_IMG","NAV_LIST_GROUP","ACTIVE","ACTIVE_UL","Event","CLICK_QUERY","CLICK_FORM","CLICK_AJAX","CLICK_DATA_API","CHANGE_DATA_API","ClassName","QUERY_MAIN","QUERY_DATA","MODAL_CONTENT","PAGE_LINK","CHECK_ALL","CHECK","ZTREE","WARN","Customer","CUSTOM","BEFORE","SUCCESS","WinData","nextInit","nextHeight","winW","winM","winH","DataKey","InitUI","element","_element","verifyJQuery","imgError","tooltip","verifySelect2","search","select","clear","checkbox","query","form","ajax","html","page","tree","file","editor","TypeError","resizeWin","document","window","on","winWidth","innerWidth","$body","enlarged","attr","trigger","each","index","$this","src","error","location","href","bgcolor","select2","console","amd","e","define","errorLoading","inputTooLong","t","input","length","maximum","n","inputTooShort","minimum","loadingMore","maximumSelected","noResults","searching","id","data","text","op","placeholder","url","delay","params","term","extend","dataType","Ajax","JSON","type","POST","processResults","result","map","obj","name","results","templateSelection","formatState","templateResult","minimumInputLength","maximumSelectionLength","state","pattern","test","hasClass","option","Option","append","minimumResultsForSearch","Infinity","event","preventDefault","currentTarget","$form","closest","find","attrs","target","empty","val","$querydata","chks","prop","ischked","blur","config","Tool","formData","_ajaxUseful","listElement","activeElements","nodeName","children","removeClass","addClass","$main","pageNum","send","_index","Tree","Upload","Editor","init","_suc","callback","$target","Toast","err","flag","modal","message","chk","eval","cus","fuc","rescus","call","args","warn","confirm","Confirm","ok","_ajaxUsefulMain","show","bef","suc","success","_init","Constructor","noConflict"],"mappings":"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"}