{"version":3,"file":"initui.js","sources":["../src/initUI.js"],"sourcesContent":["import $ from 'jquery'\nimport Ajax from './ajax.js'\nimport Confirm from './confirm.js'\nimport Editor from './editor.js'\nimport Menu from './menu.js'\nimport Toast from './toast.js'\nimport Tool from './tool.js'\nimport Tree from './tree.js'\nimport Upload from './upload.js'\nimport Zoom from './zoom.js'\n\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\n\nconst NAME = 'initUI'\nconst VERSION = '1.0.0'\nconst DATA_KEY = 'lyc.init'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_INFO = `${DATA_KEY}.`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Selector = {\n  MENU: '[target=\"menu\"]',\n  TAB: '[target=\"tab\"]',\n  SEARCH: '[target=\"search\"]',\n  SELECT: '[target=\"select\"]',\n  QUERY: '[target=\"query\"]',\n  FORM: '[target=\"form\"]',\n  AJAX: '[target=\"ajax\"]',\n  HTML: '[target=\"html\"]',\n  CLEAR: '[target=\"clear\"]',\n  PAGE: '[target=\"page\"]',\n  TREE: '[target=\"tree\"]',\n  EDITOR: '[target=\"editor\"]',\n  FILE: '[target=\"file\"]',\n\n  TOOLTIP: '[show=\"tooltip\"]',\n  ZOOM: '[show=\"zoom\"]',\n  ERROR_IMG: 'img[src-error]',\n\n  ZOOMIMG: 'zoom-img',\n  INIT: 'data-init',\n  NAV_LIST_GROUP: '.nav, .list-group',\n  ACTIVE: '.active',\n  ACTIVE_UL: '> li > .active'\n}\n\nconst Event = {\n  CLICK_MENU: `click.menu${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_QUERY: `click.query${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_FORM: `click.form${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_AJAX: `click.ajax${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n  CHANGE_DATA_API: `change${EVENT_KEY}${DATA_API_KEY}`,\n  ERROR_IMG: `error.img${EVENT_KEY}${DATA_API_KEY}`,\n  ZOOM_RESIZE: `resize.zoom${EVENT_KEY}`,\n  ZOOM_SCROLL: `scroll.zoom${EVENT_KEY}`\n}\n\nconst ClassName = {\n  QUERY_MAIN: '.query-main',\n  QUERY_DATA: '.query-data',\n  MODAL_CONTENT: '.modal-content',\n  PAGE_LINK: '.page-link',\n  CHECK_ALL: '.chk-all',\n  CHECK: '.chk',\n  ZTREE: 'ztree',\n  WARN: 'warn',\n  ACTIVE: 'active'\n}\n\nconst Customer = {\n  CHECK: 'chk',\n  CUSTOM: 'cus',\n  BEFORE: 'bef',\n  SUCCESS: 'suc'\n}\n\nconst DataKey = {\n  QUERY: `${DATA_INFO}query`,\n  TREE: 'tree',\n  EDITOR: 'editor',\n  FILE: 'file',\n  ZOOM: `${DATA_INFO}zoom`\n}\n\n/**\n * ------------------------------------------------------------------------\n *  初始化方法 init()\n *  @author lyc\n *  @date 2020年06月04日17:48:50\n * ------------------------------------------------------------------------\n */\n\nclass InitUI {\n  constructor(element, callback, start) {\n    this._element = element\n    this.verifyJQuery()\n    this.menu()\n    this.imgError()\n    this.zoom()\n    this.tooltip()\n    if (this.verifySelect2()) {\n      this.search()\n      this.select()\n    }\n    this.clear()\n    this.checkbox()\n    this.query()\n    this.form()\n    this.ajax()\n    this.html()\n    this.page()\n    this.tree()\n    this.file()\n    this.editor()\n\n    this._callback = callback && typeof callback === 'function' ? callback : this.initFuc()\n    // eslint-disable-next-line no-undefined\n    if (start === true || start === null || start === undefined) {\n      this.start()\n    }\n    return this\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  verifyJQuery() {\n    if (!$ || !$.fn) {\n      throw new TypeError('JQuery is not load, plz check out')\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  打开菜单操作\n  // ----------------------------------------------------------------------\n  menu() {\n    $(Selector.MENU, this._element).on(Event.CLICK_MENU, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      return new Menu(event.currentTarget)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  图片错误加载\n  // ----------------------------------------------------------------------\n  imgError() {\n    $(Selector.ERROR_IMG, this._element).each((index, element) => {\n      const $this = $(element)\n      let src = $this.attr('src')\n      $this.on(Event.ERROR_IMG, () => {\n        const attr = $this.attr('src-error')\n        if (!attr) {\n          src = '/img/user.png'\n        }\n        if (attr === 'user') {\n          src = '/img/user.png'\n        } else if (attr === 'img') {\n          src = '/img/img.png'\n        }\n        return $this.attr('src', src)\n      })\n      const error = $.Event(Event.ERROR_IMG)\n      return src && src !== window.location.href ? $this.attr('src', src) : $this.trigger(error)\n    })\n  }\n\n\n  // ----------------------------------------------------------------------\n  //  图片缩放\n  // ----------------------------------------------------------------------\n  zoom() {\n    $(Selector.ZOOM, this._element).each((index, element) => {\n      const $this = $(element)\n      $this.find('img').each((_i, ele) => {\n        const data = $(ele).data(DataKey.ZOOM)\n        if (!data) {\n          const zoom = new Zoom(ele)\n          $(ele).data(DataKey.ZOOM, zoom)\n        }\n      })\n    })\n    $(window).on(Event.ZOOM_RESIZE, () => {\n      const $zoomImg = $(`#${Selector.ZOOMIMG} img`)\n      if ($zoomImg.length) {\n        $zoomImg.css(Zoom.getImageStyle(Zoom.element, true))\n      }\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  提示插件 需要tooltip.js\n  // ----------------------------------------------------------------------\n  tooltip() {\n    if ($.fn.tooltip) {\n      $(Selector.TOOLTIP, this._element).tooltip({\n        bgcolor: 'dark'\n      })\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  验证是否存在select2插件\n  //  给select2插件中文国际化\n  // ----------------------------------------------------------------------\n  verifySelect2() {\n    if (!$.fn.select2) {\n      // eslint-disable-next-line no-console\n      console.error('the select2 plugin do not loaded')\n      return false\n    }\n    if ($.fn.select2.amd) {\n      const e = $.fn.select2.amd\n      e.define('select2/i18n/zh-CN', [], () => ({\n        errorLoading() {\n          return '无法载入结果。'\n        },\n        inputTooLong(e) {\n          const t = e.input.length - e.maximum\n          const n = `请删除${t}个字符`\n          return n\n        },\n        inputTooShort(e) {\n          const t = e.minimum - e.input.length\n          const n = `请再输入至少${t}个字符`\n          return n\n        },\n        loadingMore() {\n          return '载入更多结果…'\n        },\n        maximumSelected(e) {\n          const t = `最多只能选择${e.maximum}个项目`\n          return t\n        },\n        noResults() {\n          return '未找到结果'\n        },\n        searching() {\n          return '搜索中…'\n        }\n      }))\n    }\n    return true\n  }\n\n  // ----------------------------------------------------------------------\n  //  select2插件ajax获取数据\n  // ----------------------------------------------------------------------\n  search() {\n    $(Selector.SEARCH, this._element).each((index, element) => {\n      const $this = $(element)\n      const id = $this.data('id')\n      const text = $this.data('text')\n      const op = {\n        placeholder: '请选择',\n        // allowClear : true,\n        ajax: {\n          url: $this.data('url'),\n          delay: 250,\n          data(params) {\n            let query = {\n              search: params.term\n            }\n            query = $.extend(query, $this.data())\n            return query\n          },\n          dataType: Ajax.JSON,\n          type: Ajax.POST,\n          processResults(result) {\n            let data = []\n            if (result.data) {\n              data = $.map(result.data, (obj) => {\n                obj.text = obj.text || obj.name\n                return obj\n              })\n            }\n            return {\n              results: data\n            }\n          }\n        },\n        templateSelection: formatState,\n        templateResult: formatState,\n        minimumInputLength: 0,\n        maximumSelectionLength: 100\n      }\n      function formatState(state) {\n        const pattern = /<(?:[^\"'>]|\"[^\"]*\"|'[^']*')*>/g\n        if (!state.id) {\n          return state.text\n        }\n        return state.text && pattern.test(state.text) ? $(state.text) : state.text\n      }\n      $this.select2(op)\n      if ($this.hasClass('select2-hidden-accessible') && id) {\n        const option = new Option(text, id, true, true)\n        $this.append(option).trigger('change')\n      }\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  select2前台数据(相当于原生select)\n  //  目的在于统一样式\n  // ----------------------------------------------------------------------\n  select() {\n    $(Selector.SELECT, this._element).each((index, element) => {\n      $(element).select2({\n        minimumResultsForSearch: Infinity\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  重置form表单元素\n  // ----------------------------------------------------------------------\n  clear() {\n    $(Selector.CLEAR, this._element).on(Event.CLICK_DATA_API, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.QUERY_MAIN).find('form').length !== 0) {\n        $form = $this.closest(ClassName.QUERY_MAIN).find('form')\n      } else if ($this.closest(ClassName.MODAL_CONTENT).find('form').length !== 0) {\n        $form = $this.closest(ClassName.MODAL_CONTENT).find('form')\n      } else {\n        return\n      }\n      const attrs = $form.find('input,select,textarea')\n      attrs.each((index, element) => {\n        const $this = $(element)\n        if ($this.hasClass('select2-hidden-accessible')) {\n          const target = $this.attr('target')\n          if (target === 'search') {\n            return $this.empty()\n          }\n          if (target === 'select') {\n            return $this.select2('val', ' ')// 预留空格\n          }\n        }\n        return $this.val('')\n      })\n    })\n  }\n\n  checkbox() {\n    $(ClassName.CHECK_ALL, this._element).each((index, element) => {\n      const $this = $(element)\n      const $querydata = $this.closest(ClassName.QUERY_DATA)\n      const chks = $querydata.find('.chk')\n      $this.on(Event.CLICK_DATA_API, (event) => {\n        chks.prop('checked', $(event.target).prop('checked'))\n      })\n      chks.on(Event.CHANGE_DATA_API, () => {\n        const ischked = $querydata.find('.chk:checked')\n        if (ischked.length === 0) {\n          $this.prop('indeterminate', false)\n          $this.prop('checked', false)\n          return\n        }\n\n        if (ischked.length !== 0 && chks.length === ischked.length) {\n          $this.prop('indeterminate', false)\n          $this.prop('checked', true)\n          return\n        }\n        if (ischked.length !== 0 && chks.length !== ischked.length) {\n          $this.prop('indeterminate', true)\n        }\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  主页面查询表单控件\n  // ----------------------------------------------------------------------\n  query() {\n    $(Selector.QUERY, this._element).on(Event.CLICK_QUERY, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.QUERY_MAIN).find('form').length !== 0) {\n        $form = $this.closest(ClassName.QUERY_MAIN).find('form').eq(0)\n      } else {\n        return\n      }\n      const data = $this.data()\n      const url = data.url ? data.url : $this.attr('href')\n      const config = {\n        ...$form.data(),\n        ...data,\n        ...{\n          url: $form.attr('action') || url,\n          data: Tool.formData($form),\n          type: Ajax.POST,\n          dataType: Ajax.HTML\n        }\n      }\n      $this.closest(ClassName.QUERY_MAIN).data(DataKey.QUERY)\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  用于form提交\n  // ----------------------------------------------------------------------\n  form() {\n    $(Selector.FORM, this._element).on(Event.CLICK_FORM, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.MODAL_CONTENT).find('form').length !== 0) {\n        $form = $this.closest(ClassName.MODAL_CONTENT).find('form').eq(0)\n      } else if ($this.closest(ClassName.QUERY_MAIN).find('form').length !== 0) {\n        $form = $this.closest(ClassName.QUERY_MAIN).find('form').eq(0)\n      } else {\n        return\n      }\n      const data = $this.data()\n      const url = data.url ? data.url : $this.attr('href')\n      const config = {\n        ...$form.data(),\n        ...data,\n        ...{\n          url: $form.attr('action') || url,\n          data: Tool.formData($form),\n          type: Ajax.POST,\n          dataType: Ajax.JSON\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  普通ajax交互\n  // ----------------------------------------------------------------------\n  ajax() {\n    $(Selector.AJAX, this._element).on(Event.CLICK_AJAX, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      const data = $this.data()\n      const config = {\n        ...data,\n        ...{\n          url: $this.attr('href') || $this.data('url'),\n          data,\n          type: Ajax.POST,\n          dataType: Ajax.JSON\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  ajax 返回html\n  // ----------------------------------------------------------------------\n  html() {\n    $(Selector.HTML, this._element).on(Event.CLICK_AJAX, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n\n      const listElement = $this.closest(Selector.NAV_LIST_GROUP)[0]\n      const activeElements = listElement && (listElement.nodeName === 'UL' || listElement.nodeName === 'OL')\n        ? $(listElement).find(Selector.ACTIVE_UL)\n        : $(listElement).children(Selector.ACTIVE)\n      if (activeElements) {\n        $(activeElements).removeClass(ClassName.ACTIVE)\n      }\n      $this.addClass(ClassName.ACTIVE)\n\n      const data = $this.data()\n      const config = {\n        ...data,\n        ...{\n          url: $this.attr('href') || $this.data('url'),\n          data,\n          type: Ajax.POST,\n          dataType: Ajax.HTML\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  分页器js处理\n  // ----------------------------------------------------------------------\n  page() {\n    $(Selector.PAGE, this._element).each((index, element) => {\n      const $main = $(element).closest(ClassName.QUERY_MAIN)\n      const op = $main.data(DataKey.QUERY) || {\n        data: {}\n      }\n      $(element).find(ClassName.PAGE_LINK).on(Event.CHANGE_DATA_API, (event) => {\n        if (event) {\n          event.preventDefault()\n        }\n        const $this = $(event.target)\n        const pageNum = $this.data('pagenum')\n        op.data.pageNum = pageNum\n        Ajax.send(op)\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  tree js处理\n  // ----------------------------------------------------------------------\n  tree() {\n    $(Selector.TREE, this._element).each((_index, element) => {\n      const tree = new Tree(element)\n      $(element).data(DataKey.TREE, tree)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  file js处理\n  // ----------------------------------------------------------------------\n  file() {\n    $(Selector.FILE, this._element).each((_index, element) => {\n      const file = new Upload(element)\n      $(element).data(DataKey.FILE, file)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  富文本编辑器 js处理\n  // ----------------------------------------------------------------------\n  editor() {\n    $(Selector.EDITOR, this._element).each((index, element) => {\n      const editor = new Editor(element)\n      $(element).data(DataKey.EDITOR, editor)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  ajax默认success方法\n  // ----------------------------------------------------------------------\n  _suc($this, config, callback) {\n    if (config.dataType === Ajax.HTML) {\n      return function (result) {\n        if (!config.target) {\n          return\n        }\n        const $target = ($this.closest(ClassName.QUERY_MAIN) || document).find(`${config.target}:first`)\n        $target.html(result)\n        $target.data(DATA_KEY, new InitUI($target.html(result)[0]))\n        if (callback && typeof callback === 'function') {\n          callback($this, config)\n        }\n      }\n    }\n    return function (result) {\n      if (!result || typeof result !== 'object') {\n        return Toast.err('未知错误')\n      }\n      // 后台返回参数 result\n      const flag = result.result\n\n      if (callback && typeof callback === 'function') {\n        callback($this, config)\n      } else if (flag) {\n        if ($('#modal').length > 0) {\n          $('#modal').modal('hide')\n        }\n        if ($('#query').length > 0) {\n          $('#query').trigger('click')\n        }\n      }\n      return Toast[flag ? 'suc' : 'err'](result.message)\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  通用处理Customer中的事件\n  //  事件顺序:[chk , cus, bef ,suc]\n  // ----------------------------------------------------------------------\n  _ajaxUseful($this, config) {\n    const chk = Tool.eval(config[Customer.CHECK])\n    if (typeof chk === 'function') {\n      const flag = chk($this, config.data)\n      if (typeof flag === 'boolean' && !flag) {\n        return\n      }\n    }\n    // 自定义函数式  用于封装数据\n    const cus = Tool.eval(config[Customer.CUSTOM])\n    if (cus && typeof cus === 'object' && typeof cus.fuc === 'function') {\n      const rescus = cus.fuc.call($this[0], ...cus.args)\n      if (rescus && typeof rescus === 'object') {\n        config.data = {\n          ...config.data,\n          ...rescus\n        }\n      } else if (typeof rescus === 'boolean' && !rescus) {\n        return\n      } else {\n        return\n      }\n    }\n\n    const warn = config[ClassName.WARN]\n    if (warn) {\n      const confirm = new Confirm(warn)\n      confirm.ok(() => this._ajaxUsefulMain($this, config)).show()\n    } else {\n      this._ajaxUsefulMain($this, config)\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  通用处理Customer中的事件\n  //  事件顺序:[chk , cus, bef ,suc]\n  // ----------------------------------------------------------------------\n  _ajaxUsefulMain($this, config) {\n    const bef = Tool.eval(config[Customer.BEFORE])\n    if (typeof bef === 'function') {\n      const obj = bef($this, config.data)\n      if (!bef) {\n        return\n      }\n      config.data = {\n        ...config.data,\n        ...typeof obj === 'object' && obj ? obj : {}\n      }\n    }\n    const suc = Tool.eval(config[Customer.SUCCESS])\n    config.success = this._suc($this, config, suc)\n    Ajax.send(config)\n  }\n\n  start() {\n    if (this._callback && typeof this._callback === 'function') {\n      this._callback()\n    }\n  }\n\n  initFuc() {\n    return function () {\n      const ele = $(this._element).find(`[${Selector.INIT}]:first`)\n      if (ele.length === 0) {\n        return\n      }\n      const init = Tool.eval(ele.attr(Selector.INIT))\n      if (init && typeof init === 'function') {\n        init(this._element)\n      }\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  默认启动方法init()\n  // ----------------------------------------------------------------------\n  static _init(callback, start) {\n    return this.each(function () {\n      $(this).data(DATA_KEY, new InitUI(this, callback, start))\n    })\n  }\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n$.fn[NAME] = InitUI._init\n$.fn[NAME].Constructor = InitUI\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return InitUI._init\n}\nexport default InitUI\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_INFO","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","Selector","MENU","TAB","SEARCH","SELECT","QUERY","FORM","AJAX","HTML","CLEAR","PAGE","TREE","EDITOR","FILE","TOOLTIP","ZOOM","ERROR_IMG","ZOOMIMG","INIT","NAV_LIST_GROUP","ACTIVE","ACTIVE_UL","Event","CLICK_MENU","CLICK_QUERY","CLICK_FORM","CLICK_AJAX","CLICK_DATA_API","CHANGE_DATA_API","ZOOM_RESIZE","ZOOM_SCROLL","ClassName","QUERY_MAIN","QUERY_DATA","MODAL_CONTENT","PAGE_LINK","CHECK_ALL","CHECK","ZTREE","WARN","Customer","CUSTOM","BEFORE","SUCCESS","DataKey","InitUI","element","callback","start","_element","verifyJQuery","menu","imgError","zoom","tooltip","verifySelect2","search","select","clear","checkbox","query","form","ajax","html","page","tree","file","editor","_callback","initFuc","undefined","TypeError","on","event","preventDefault","Menu","currentTarget","each","index","$this","src","attr","error","window","location","href","trigger","find","_i","ele","data","Zoom","$zoomImg","length","css","getImageStyle","bgcolor","select2","console","amd","e","define","errorLoading","inputTooLong","t","input","maximum","n","inputTooShort","minimum","loadingMore","maximumSelected","noResults","searching","id","text","op","placeholder","url","delay","params","term","extend","dataType","Ajax","JSON","type","POST","processResults","result","map","obj","name","results","templateSelection","formatState","templateResult","minimumInputLength","maximumSelectionLength","state","pattern","test","hasClass","option","Option","append","minimumResultsForSearch","Infinity","$form","closest","attrs","target","empty","val","$querydata","chks","prop","ischked","blur","eq","config","Tool","formData","_ajaxUseful","listElement","activeElements","nodeName","children","removeClass","addClass","$main","pageNum","send","_index","Tree","Upload","Editor","_suc","$target","document","Toast","err","flag","modal","message","chk","eval","cus","fuc","rescus","call","args","warn","confirm","Confirm","ok","_ajaxUsefulMain","show","bef","suc","success","init","_init","Constructor","noConflict"],"mappings":"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"}