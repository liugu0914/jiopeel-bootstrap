{"version":3,"file":"initui.js","sources":["../src/initUI.js"],"sourcesContent":["import $ from 'jquery'\nimport Ajax from './ajax.js'\nimport Confirm from './confirm.js'\nimport Editor from './editor.js'\nimport Menu from './menu.js'\nimport Toast from './toast.js'\nimport Tool from './tool.js'\nimport Tree from './tree.js'\nimport Upload from './upload.js'\n\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\n\nconst NAME = 'initUI'\nconst VERSION = '1.0.0'\nconst DATA_KEY = 'lyc.init'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_INFO = `${DATA_KEY}.`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Selector = {\n  MENU: '[target=\"menu\"]',\n  TAB: '[target=\"tab\"]',\n  SEARCH: '[target=\"search\"]',\n  SELECT: '[target=\"select\"]',\n  QUERY: '[target=\"query\"]',\n  FORM: '[target=\"form\"]',\n  AJAX: '[target=\"ajax\"]',\n  HTML: '[target=\"html\"]',\n  CLEAR: '[target=\"clear\"]',\n  PAGE: '[target=\"page\"]',\n  TREE: '[target=\"tree\"]',\n  EDITOR: '[target=\"editor\"]',\n  FILE: '[target=\"file\"]',\n  TOOLTIP: '[show=\"tooltip\"]',\n  ERROR_IMG: 'img[src-error]',\n\n  INIT: 'data-init',\n  NAV_LIST_GROUP: '.nav, .list-group',\n  ACTIVE: '.active',\n  ACTIVE_UL: '> li > .active'\n}\n\nconst Event = {\n  CLICK_MENU: `click.menu${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_QUERY: `click.query${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_FORM: `click.form${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_AJAX: `click.ajax${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n  CHANGE_DATA_API: `change${EVENT_KEY}${DATA_API_KEY}`,\n  ERROR_IMG: `error.img${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  QUERY_MAIN: '.query-main',\n  QUERY_DATA: '.query-data',\n  MODAL_CONTENT: '.modal-content',\n  PAGE_LINK: '.page-link',\n  CHECK_ALL: '.chk-all',\n  CHECK: '.chk',\n  ZTREE: 'ztree',\n  WARN: 'warn',\n  ACTIVE: 'active'\n}\n\nconst Customer = {\n  CHECK: 'chk',\n  CUSTOM: 'cus',\n  BEFORE: 'bef',\n  SUCCESS: 'suc'\n}\n\nconst DataKey = {\n  QUERY: `${DATA_INFO}query`,\n  TREE: 'tree',\n  EDITOR: 'editor',\n  FILE: 'file'\n}\n\n/**\n * ------------------------------------------------------------------------\n *  初始化方法 init()\n *  @author lyc\n *  @date 2020年06月04日17:48:50\n * ------------------------------------------------------------------------\n */\n\nclass InitUI {\n  constructor(element, callback, start) {\n    this._element = element\n    this.verifyJQuery()\n    this.menu()\n    this.imgError()\n    this.tooltip()\n    if (this.verifySelect2()) {\n      this.search()\n      this.select()\n    }\n    this.clear()\n    this.checkbox()\n    this.query()\n    this.form()\n    this.ajax()\n    this.html()\n    this.page()\n    this.tree()\n    this.file()\n    this.editor()\n\n    this._callback = callback && typeof callback === 'function' ? callback : this.initFuc()\n    // eslint-disable-next-line no-undefined\n    if (start === true || start === null || start === undefined) {\n      this.start()\n    }\n    return this\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  verifyJQuery() {\n    if (!$ || !$.fn) {\n      throw new TypeError('JQuery is not load, plz check out')\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  打开菜单操作\n  // ----------------------------------------------------------------------\n  menu() {\n    $(Selector.MENU, this._element).on(Event.CLICK_MENU, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      return new Menu(event.currentTarget)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  图片错误加载\n  // ----------------------------------------------------------------------\n  imgError() {\n    $(Selector.ERROR_IMG, this._element).each((index, element) => {\n      const $this = $(element)\n      let src = $this.attr('src')\n      $this.on(Event.ERROR_IMG, () => {\n        const attr = $this.attr('src-error')\n        if (!attr) {\n          src = '/img/user.png'\n        }\n        if (attr === 'user') {\n          src = '/img/user.png'\n        } else if (attr === 'img') {\n          src = '/img/img.png'\n        }\n        return $this.attr('src', src)\n      })\n      const error = $.Event(Event.ERROR_IMG)\n      return src && src !== window.location.href ? $this.attr('src', src) : $this.trigger(error)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  提示插件 需要tooltip.js\n  // ----------------------------------------------------------------------\n  tooltip() {\n    if ($.fn.tooltip) {\n      $(Selector.TOOLTIP, this._element).tooltip({\n        bgcolor: 'dark'\n      })\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  验证是否存在select2插件\n  //  给select2插件中文国际化\n  // ----------------------------------------------------------------------\n  verifySelect2() {\n    if (!$.fn.select2) {\n      // eslint-disable-next-line no-console\n      console.error('the select2 plugin do not loaded')\n      return false\n    }\n    if ($.fn.select2.amd) {\n      const e = $.fn.select2.amd\n      e.define('select2/i18n/zh-CN', [], () => ({\n        errorLoading() {\n          return '无法载入结果。'\n        },\n        inputTooLong(e) {\n          const t = e.input.length - e.maximum\n          const n = `请删除${t}个字符`\n          return n\n        },\n        inputTooShort(e) {\n          const t = e.minimum - e.input.length\n          const n = `请再输入至少${t}个字符`\n          return n\n        },\n        loadingMore() {\n          return '载入更多结果…'\n        },\n        maximumSelected(e) {\n          const t = `最多只能选择${e.maximum}个项目`\n          return t\n        },\n        noResults() {\n          return '未找到结果'\n        },\n        searching() {\n          return '搜索中…'\n        }\n      }))\n    }\n    return true\n  }\n\n  // ----------------------------------------------------------------------\n  //  select2插件ajax获取数据\n  // ----------------------------------------------------------------------\n  search() {\n    $(Selector.SEARCH, this._element).each((index, element) => {\n      const $this = $(element)\n      const id = $this.data('id')\n      const text = $this.data('text')\n      const op = {\n        placeholder: '请选择',\n        // allowClear : true,\n        ajax: {\n          url: $this.data('url'),\n          delay: 250,\n          data(params) {\n            let query = {\n              search: params.term\n            }\n            query = $.extend(query, $this.data())\n            return query\n          },\n          dataType: Ajax.JSON,\n          type: Ajax.POST,\n          processResults(result) {\n            let data = []\n            if (result.data) {\n              data = $.map(result.data, (obj) => {\n                obj.text = obj.text || obj.name\n                return obj\n              })\n            }\n            return {\n              results: data\n            }\n          }\n        },\n        templateSelection: formatState,\n        templateResult: formatState,\n        minimumInputLength: 0,\n        maximumSelectionLength: 100\n      }\n      function formatState(state) {\n        const pattern = /<(?:[^\"'>]|\"[^\"]*\"|'[^']*')*>/g\n        if (!state.id) {\n          return state.text\n        }\n        return state.text && pattern.test(state.text) ? $(state.text) : state.text\n      }\n      $this.select2(op)\n      if ($this.hasClass('select2-hidden-accessible') && id) {\n        const option = new Option(text, id, true, true)\n        $this.append(option).trigger('change')\n      }\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  select2前台数据(相当于原生select)\n  //  目的在于统一样式\n  // ----------------------------------------------------------------------\n  select() {\n    $(Selector.SELECT, this._element).each((index, element) => {\n      $(element).select2({\n        minimumResultsForSearch: Infinity\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  重置form表单元素\n  // ----------------------------------------------------------------------\n  clear() {\n    $(Selector.CLEAR, this._element).on(Event.CLICK_DATA_API, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.QUERY_MAIN).find('form').length !== 0) {\n        $form = $this.closest(ClassName.QUERY_MAIN).find('form')\n      } else if ($this.closest(ClassName.MODAL_CONTENT).find('form').length !== 0) {\n        $form = $this.closest(ClassName.MODAL_CONTENT).find('form')\n      } else {\n        return\n      }\n      const attrs = $form.find('input,select,textarea')\n      attrs.each((index, element) => {\n        const $this = $(element)\n        if ($this.hasClass('select2-hidden-accessible')) {\n          const target = $this.attr('target')\n          if (target === 'search') {\n            return $this.empty()\n          }\n          if (target === 'select') {\n            return $this.select2('val', ' ')// 预留空格\n          }\n        }\n        return $this.val('')\n      })\n    })\n  }\n\n  checkbox() {\n    $(ClassName.CHECK_ALL, this._element).each((index, element) => {\n      const $this = $(element)\n      const $querydata = $this.closest(ClassName.QUERY_DATA)\n      const chks = $querydata.find('.chk')\n      $this.on(Event.CLICK_DATA_API, (event) => {\n        chks.prop('checked', $(event.target).prop('checked'))\n      })\n      chks.on(Event.CHANGE_DATA_API, () => {\n        const ischked = $querydata.find('.chk:checked')\n        if (ischked.length === 0) {\n          $this.prop('indeterminate', false)\n          $this.prop('checked', false)\n          return\n        }\n\n        if (ischked.length !== 0 && chks.length === ischked.length) {\n          $this.prop('indeterminate', false)\n          $this.prop('checked', true)\n          return\n        }\n        if (ischked.length !== 0 && chks.length !== ischked.length) {\n          $this.prop('indeterminate', true)\n        }\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  主页面查询表单控件\n  // ----------------------------------------------------------------------\n  query() {\n    $(Selector.QUERY, this._element).on(Event.CLICK_QUERY, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.QUERY_MAIN).find('form').length !== 0) {\n        $form = $this.closest(ClassName.QUERY_MAIN).find('form')\n      } else {\n        return\n      }\n      const config = {\n        ...$form.data(),\n        ...$this.data(),\n        ...{\n          url: $form.attr('action'),\n          data: Tool.formData($form),\n          type: Ajax.POST,\n          dataType: Ajax.HTML\n        }\n      }\n      $this.closest(ClassName.QUERY_MAIN).data(DataKey.QUERY)\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  用于form提交\n  // ----------------------------------------------------------------------\n  form() {\n    $(Selector.FORM, this._element).on(Event.CLICK_FORM, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      let $form\n      if ($this.closest('form').length !== 0) {\n        $form = $this.closest('form')\n      } else if ($this.closest(ClassName.MODAL_CONTENT).find('form').length !== 0) {\n        $form = $this.closest(ClassName.MODAL_CONTENT).find('form')\n      } else {\n        return\n      }\n      const config = {\n        ...$form.data(),\n        ...$this.data(),\n        ...{\n          url: $form.attr('action'),\n          data: Tool.formData($form),\n          type: Ajax.POST,\n          dataType: Ajax.JSON\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  普通ajax交互\n  // ----------------------------------------------------------------------\n  ajax() {\n    $(Selector.AJAX, this._element).on(Event.CLICK_AJAX, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n      const data = $this.data()\n      const config = {\n        ...data,\n        ...{\n          url: $this.attr('href') || $this.data('url'),\n          data,\n          type: Ajax.POST,\n          dataType: Ajax.JSON\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  ajax 返回html\n  // ----------------------------------------------------------------------\n  html() {\n    $(Selector.HTML, this._element).on(Event.CLICK_AJAX, (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n      const $this = $(event.currentTarget)\n      $this.blur()\n\n      const listElement = $this.closest(Selector.NAV_LIST_GROUP)[0]\n      const activeElements = listElement && (listElement.nodeName === 'UL' || listElement.nodeName === 'OL')\n        ? $(listElement).find(Selector.ACTIVE_UL)\n        : $(listElement).children(Selector.ACTIVE)\n      if (activeElements) {\n        $(activeElements).removeClass(ClassName.ACTIVE)\n      }\n      $this.addClass(ClassName.ACTIVE)\n\n      const data = $this.data()\n      const config = {\n        ...data,\n        ...{\n          url: $this.attr('href') || $this.data('url'),\n          data,\n          type: Ajax.POST,\n          dataType: Ajax.HTML\n        }\n      }\n      this._ajaxUseful($this, config)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  分页器js处理\n  // ----------------------------------------------------------------------\n  page() {\n    $(Selector.PAGE, this._element).each((index, element) => {\n      const $main = $(element).closest(ClassName.QUERY_MAIN)\n      const op = $main.data(DataKey.QUERY) || {\n        data: {}\n      }\n      $(element).find(ClassName.PAGE_LINK).on(Event.CHANGE_DATA_API, (event) => {\n        if (event) {\n          event.preventDefault()\n        }\n        const $this = $(event.target)\n        const pageNum = $this.data('pagenum')\n        op.data.pageNum = pageNum\n        Ajax.send(op)\n      })\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  tree js处理\n  // ----------------------------------------------------------------------\n  tree() {\n    $(Selector.TREE, this._element).each((_index, element) => {\n      const tree = new Tree(element)\n      $(element).data(DataKey.TREE, tree)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  file js处理\n  // ----------------------------------------------------------------------\n  file() {\n    $(Selector.FILE, this._element).each((_index, element) => {\n      const file = new Upload(element)\n      $(element).data(DataKey.FILE, file)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  富文本编辑器 js处理\n  // ----------------------------------------------------------------------\n  editor() {\n    $(Selector.EDITOR, this._element).each((index, element) => {\n      const editor = Editor.init(element)\n      $(element).data(DataKey.EDITOR, editor)\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  //  ajax默认success方法\n  // ----------------------------------------------------------------------\n  _suc($this, config, callback) {\n    if (config.dataType === Ajax.HTML) {\n      return function (result) {\n        if (!config.target) {\n          return\n        }\n        const $target = ($this.closest(ClassName.QUERY_MAIN) || document).find(`${config.target}:first`)\n        $target.html(result)\n        $target.data(DATA_KEY, new InitUI($target.html(result)[0]))\n        if (callback && typeof callback === 'function') {\n          callback($this, config)\n        }\n      }\n    }\n    return function (result) {\n      if (!result || typeof result !== 'object') {\n        return Toast.err('未知错误')\n      }\n      // 后台返回参数 result\n      const flag = result.result\n\n      if (callback && typeof callback === 'function') {\n        callback($this, config)\n      } else if (flag) {\n        if ($('#modal').length > 0) {\n          $('#modal').modal('hide')\n        }\n        if ($('#query').length > 0) {\n          $('#query').trigger('click')\n        }\n      }\n      return Toast[flag ? 'suc' : 'err'](result.message)\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  通用处理Customer中的事件\n  //  事件顺序:[chk , cus, bef ,suc]\n  // ----------------------------------------------------------------------\n  _ajaxUseful($this, config) {\n    const chk = Tool.eval(config[Customer.CHECK])\n    if (typeof chk === 'function') {\n      const flag = chk($this, config.data)\n      if (typeof flag === 'boolean' && !flag) {\n        return\n      }\n    }\n    // 自定义函数式  用于封装数据\n    const cus = Tool.eval(config[Customer.CUSTOM])\n    if (cus && typeof cus === 'object' && typeof cus.fuc === 'function') {\n      const rescus = cus.fuc.call($this[0], ...cus.args)\n      if (rescus && typeof rescus === 'object') {\n        config.data = {\n          ...config.data,\n          ...rescus\n        }\n      } else if (typeof rescus === 'boolean' && !rescus) {\n        return\n      } else {\n        return\n      }\n    }\n\n    const warn = config[ClassName.WARN]\n    if (warn) {\n      const confirm = new Confirm(warn)\n      confirm.ok(() => this._ajaxUsefulMain($this, config)).show()\n    } else {\n      this._ajaxUsefulMain($this, config)\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  通用处理Customer中的事件\n  //  事件顺序:[chk , cus, bef ,suc]\n  // ----------------------------------------------------------------------\n  _ajaxUsefulMain($this, config) {\n    const bef = Tool.eval(config[Customer.BEFORE])\n    if (typeof bef === 'function') {\n      const obj = bef($this, config.data)\n      if (!bef) {\n        return\n      }\n      config.data = {\n        ...config.data,\n        ...typeof obj === 'object' && obj ? obj : {}\n      }\n    }\n    const suc = Tool.eval(config[Customer.SUCCESS])\n    config.success = this._suc($this, config, suc)\n    Ajax.send(config)\n  }\n\n  start() {\n    if (this._callback && typeof this._callback === 'function') {\n      this._callback()\n    }\n  }\n\n  initFuc() {\n    return function () {\n      const ele = $(this._element).find(`[${Selector.INIT}]:first`)\n      if (ele.length === 0) {\n        return\n      }\n      const init = Tool.eval(ele.attr(Selector.INIT))\n      if (init && typeof init === 'function') {\n        init(this._element)\n      }\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  //  默认启动方法init()\n  // ----------------------------------------------------------------------\n  static _init(callback, start) {\n    return this.each(function () {\n      $(this).data(DATA_KEY, new InitUI(this, callback, start))\n    })\n  }\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n$.fn[NAME] = InitUI._init\n$.fn[NAME].Constructor = InitUI\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return InitUI._init\n}\nexport default InitUI\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_INFO","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","Selector","MENU","TAB","SEARCH","SELECT","QUERY","FORM","AJAX","HTML","CLEAR","PAGE","TREE","EDITOR","FILE","TOOLTIP","ERROR_IMG","INIT","NAV_LIST_GROUP","ACTIVE","ACTIVE_UL","Event","CLICK_MENU","CLICK_QUERY","CLICK_FORM","CLICK_AJAX","CLICK_DATA_API","CHANGE_DATA_API","ClassName","QUERY_MAIN","QUERY_DATA","MODAL_CONTENT","PAGE_LINK","CHECK_ALL","CHECK","ZTREE","WARN","Customer","CUSTOM","BEFORE","SUCCESS","DataKey","InitUI","element","callback","start","_element","verifyJQuery","menu","imgError","tooltip","verifySelect2","search","select","clear","checkbox","query","form","ajax","html","page","tree","file","editor","_callback","initFuc","undefined","TypeError","on","event","preventDefault","Menu","currentTarget","each","index","$this","src","attr","error","window","location","href","trigger","bgcolor","select2","console","amd","e","define","errorLoading","inputTooLong","t","input","length","maximum","n","inputTooShort","minimum","loadingMore","maximumSelected","noResults","searching","id","data","text","op","placeholder","url","delay","params","term","extend","dataType","Ajax","JSON","type","POST","processResults","result","map","obj","name","results","templateSelection","formatState","templateResult","minimumInputLength","maximumSelectionLength","state","pattern","test","hasClass","option","Option","append","minimumResultsForSearch","Infinity","$form","closest","find","attrs","target","empty","val","$querydata","chks","prop","ischked","blur","config","Tool","formData","_ajaxUseful","listElement","activeElements","nodeName","children","removeClass","addClass","$main","pageNum","send","_index","Tree","Upload","Editor","init","_suc","$target","document","Toast","err","flag","modal","message","chk","eval","cus","fuc","rescus","call","args","warn","confirm","Confirm","ok","_ajaxUsefulMain","show","bef","suc","success","ele","_init","Constructor","noConflict"],"mappings":"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"}