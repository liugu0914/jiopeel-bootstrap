{"version":3,"file":"comments.js","sources":["../src/comments.js"],"sourcesContent":["/* eslint-disable no-script-url */\r\n/* eslint-disable complexity */\r\n/* eslint-disable consistent-return */\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nconst Comments = {\r\n  $comment: null,\r\n  $author: null,\r\n  $contact: null,\r\n  $website: null,\r\n  replayTemplate : `<span id=\"comments-main-replay\" class=\"comments-main-replay\">\r\n  <span class=\"media-info-span\">\r\n      回复\r\n          <i class=\"cs cs-xiangyou1\"></i>\r\n      </span>\r\n  <span class=\"media-info-span\">\r\n          <a class=\"media-body-img\" href=\"#\">\r\n              <img src=\"{{img}}\" class=\"w-32 rounded-circle\">\r\n          </a>\r\n      </span>\r\n  <span class=\"media-info-span\">\r\n          <a href=\"{{website}}\">{{author}}</a>\r\n      </span>\r\n  <span  class=\"btn btn-sm btn-outline-dark float-right pointer pl-1 pr-1\" onclick=\"Comments.cancelRelay()\">\r\n     取消回复\r\n  </span>\r\n</span>`,\r\n  mediaFisrtTemplate : `<div class=\"media media-first pt-3 pb-3\">\r\n<a class=\"pr-1 pr-md-2\" href=\"javascript:void(0)\">\r\n    <img src=\"/img/user.png\" class=\"w-32 rounded-circle\" alt=\"Generic placeholder image\">\r\n</a>\r\n<div class=\"media-body\">\r\n    <div class=\"media-content\">\r\n        <h5 class=\"mt-0 mb-1\">\r\n            <a href=\"{{website}}\" >{{author}}</a>\r\n            <span class=\"media-info-span float-right font-15\">\r\n            <a href=\"#\" class=\"comments-like {{active}}\">\r\n                <i class=\"cs cs-dianzan\"></i>\r\n                <span>{{love}}</span>\r\n            </a>\r\n        </span>\r\n        </h5>\r\n        <p>{{comment}}</p>\r\n        <div class=\"media-info\">\r\n            <small class=\"text-muted\">\r\n                <span class=\"media-info-span\">{{ctime}}</span>\r\n                <span class=\"media-info-span float-right\">\r\n                <a class=\"comments-replay\"  href=\"#\">\r\n                    <i class=\"cs cs-pinglun\"></i>\r\n                    回复\r\n                </a>\r\n            </span>\r\n            </small>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>`,\r\n  mediaReplayTemplate : `<div class=\"media mt-2\">\r\n        <a class=\"pr-1\" href=\"javascript:void(0)\">\r\n            <img src=\"/img/user.png\" class=\"avatar-xs rounded-circle\" alt=\"Generic placeholder image\">\r\n        </a>\r\n        <div class=\"media-body\">\r\n            <div class=\"media-content\">\r\n            <h5 class=\"mt-0 mb-1\">\r\n                <span class=\"media-info-span\">\r\n              <a href=\"{{website}}\" >\r\n                {{author}}\r\n              </a>\r\n                {{superauthorTemplate}}\r\n                <span class=\"media-info-span float-right font-15\">\r\n                    <a href=\"#\"  class=\"comments-like {{active}}\"><i class=\"cs cs-dianzan\"></i> <span>{{love}}</span></a>\r\n                </span>\r\n            </h5>\r\n            <p>{{comment}}</p>\r\n            </div>\r\n            <div class=\"media-info\">\r\n                <small class=\"text-muted\">\r\n                    <span class=\"media-info-span\">{{ctime}}</span>\r\n                    <span class=\"media-info-span float-right\">\r\n                        <a  href=\"#\" class=\"comments-replay\"> <i class=\"cs cs-pinglun\"></i> 回复</a>\r\n                    </span>\r\n                </small>\r\n            </div>\r\n        </div>\r\n    </div>`,\r\n  superTemplate : `</span>\r\n                <span class=\"media-info-span\">\r\n                <i class=\"cs cs-xiangyou1\"></i>\r\n            </span>\r\n            <span class=\"media-info-span\">\r\n                <a class=\"media-body-img\" href=\"javascript:void(0)\">\r\n                    <img src=\"/img/user.png\" class=\"avatar-xs rounded-circle\" alt=\"Generic placeholder image\">\r\n                </a>\r\n            </span>\r\n            <span class=\"media-info-span\">\r\n                <a href=\"{{superwebsite}}\" >\r\n                {{superauthor}}\r\n                </a>\r\n            </span>`,\r\n  Info: {\r\n    prefix: 'jiopeel_comment_',\r\n    author: 'jiopeel_comment_author',\r\n    contact: 'jiopeel_comment_contact',\r\n    website: 'jiopeel_comment_website',\r\n    data: 'jiopeel_comment_data',\r\n    like: 'jiopeel_comment_like',\r\n    cookieDay: 15,\r\n    dataDay: 0.5\r\n  },\r\n  init() {\r\n    Comments.$comment = $('#comment')\r\n    Comments.$author = $('#author')\r\n    Comments.$contact = $('#contact')\r\n    Comments.$website = $('#website')\r\n    const CommentData = Comments.getCommentCookie()\r\n    const author = CommentData[Comments.Info.author.replace(Comments.Info.prefix, '')]\r\n    const contact = CommentData[Comments.Info.contact.replace(Comments.Info.prefix, '')]\r\n    const website = CommentData[Comments.Info.website.replace(Comments.Info.prefix, '')]\r\n    if (author) {\r\n      Comments.$author.val(author)\r\n    }\r\n    if (contact) {\r\n      Comments.$contact.val(contact)\r\n    }\r\n    if (website) {\r\n      Comments.$website.val(website)\r\n    }\r\n    Comments.loadComments()\r\n    Comments.commentLike()\r\n    Comments.relay()\r\n    $(window).on('resize scroll', () => {\r\n      const windowHeight = $(window).height()// 当前窗口的高度\r\n      const scrollTop = $(window).scrollTop()// 当前滚动条从上往下滚动的距离\r\n      const docHeight = $(document).height() // 当前文档的高度\r\n      // 当 滚动条距底部的距离 + 滚动条滚动的距离 >= 文档的高度 - 窗口的高度\r\n      // 换句话说：（滚动条滚动的距离 + 窗口的高度 = 文档的高度）  这个是基本的公式\r\n      let pensen = scrollTop / (docHeight - windowHeight) * 100\r\n      pensen = pensen.toFixed(0)\r\n      if (pensen >= 100) {\r\n        if ($('#comments-loading').length !== 0) {\r\n          return\r\n        }\r\n        Comments.addLoading()\r\n        setTimeout(Comments.loadComments, 200)\r\n      }\r\n    })\r\n  },\r\n  chk() {\r\n    const nullMsg = []\r\n    if (!Comments.$comment.val() || !Comments.$comment.val().trim()) {\r\n      nullMsg.push('评论内容')\r\n    }\r\n    if (!Comments.$author.val() || !Comments.$author.val().trim()) {\r\n      nullMsg.push('昵称')\r\n    }\r\n    if (!Comments.$contact.val() || !Comments.$contact.val().trim()) {\r\n      nullMsg.push('Email/QQ')\r\n    }\r\n    if (nullMsg.length > 0) {\r\n      Toast.err(`${nullMsg.join(',  ')}不能为空`)\r\n      return false\r\n    }\r\n    const authorName = Comments.$author.val()\r\n    if (authorName.length > 20) {\r\n      Toast.err('昵称过长,不能大于20个字符')\r\n      return false\r\n    }\r\n    const contactVal = Comments.$contact.val()\r\n    if (!Tool.chkEmail(contactVal) && !Tool.chkQQ(contactVal)) {\r\n      Toast.err('Email/QQ格式不正确')\r\n      return false\r\n    }\r\n    const websiteVal = Comments.$website.val()\r\n    if (websiteVal && websiteVal.trim() && !Tool.chkHttp(websiteVal)) {\r\n      Toast.err('网站格式不正确,请以http(s)://开头')\r\n      return false\r\n    }\r\n    return true\r\n  },\r\n  bef($this, data) {\r\n    Ajax.setCookie(Comments.Info.author, data.author, Comments.Info.cookieDay)\r\n    Ajax.setCookie(Comments.Info.contact, data.contact, Comments.Info.cookieDay)\r\n    Ajax.setCookie(Comments.Info.website, data.website, Comments.Info.cookieDay)\r\n    // 待审核的评论\r\n    data.publishtime = moment ? moment().format('YYYY-MM-DD HH:mm') : new Date().getTime()\r\n    Ajax.setCookie(Comments.Info.data, JSON.stringify(data), Comments.Info.dataDay)\r\n    Comments.setLocalStorage(data)\r\n    const menuItem = $('#pc-menu').find('li.menu-item.active:first')\r\n    const style = menuItem.data('style') || 'content'\r\n    const alias = menuItem.data('alias')\r\n    data.contentid = $('#contentid').val() || '0'\r\n    data.style = style\r\n    data.alias = alias\r\n    return data\r\n  },\r\n  suc() {\r\n    window.location.reload()\r\n  },\r\n  relay() {\r\n    $(document).on('click', 'a.comments-replay', function (event) {\r\n      if (event) {\r\n        event.preventDefault()\r\n      }\r\n      $('#scroll_to_comments').trigger('click')// 滑动到评论\r\n      if ($('#comments-main-replay').length !== 0) {\r\n        $('#comments-main-replay').remove()\r\n      }\r\n      const $body = $(this).closest('.media-first').find('.media-body:first')\r\n      const $subbody = $(this).closest('.media-body')\r\n      const data = $body.data('comment_data') || {}\r\n      $('#topid').val(data.id)// 顶级评论id\r\n      const subdata = $subbody.data('comment_data') || {}\r\n      $('#superid').val(subdata.id)// 回复的id\r\n\r\n      const $header = $('#comments-main-header')\r\n      let temp = Comments.replayTemplate\r\n      temp = temp.replace(new RegExp('{{img}}', 'g'), '/img/user.png')\r\n        .replace(new RegExp('{{website}}', 'g'), subdata.website || 'javascript:void(0)')\r\n        .replace(new RegExp('{{author}}', 'g'), subdata.author || '外星人')\r\n      $(temp).appendTo($header)\r\n      setTimeout(() => {\r\n        $('#comment').trigger('focus')\r\n      }, 200)\r\n    })\r\n  },\r\n  commentLike() {\r\n    $(document).on('click', 'a.comments-like', function (event) {\r\n      if (event) {\r\n        event.preventDefault()\r\n      }\r\n      const $this = $(this)\r\n      const data = $this.parents('.media-body').data('comment_data')\r\n      if (!data || !data.id) {\r\n        return\r\n      }\r\n      const id = data.id\r\n      let StorageData = localStorage.getItem(Comments.Info.like)\r\n      if (StorageData) {\r\n        StorageData = JSON.parse(StorageData)\r\n        if (StorageData.indexOf(id) > -1) {\r\n          return Toast.warn('你已经点过赞了')\r\n        }\r\n      }\r\n      Ajax.get('/CommentLike', {\r\n        id\r\n      }, (base) => {\r\n        if (base.result && base.data) {\r\n          const rd = base.data\r\n          $this.addClass('active').find('span').text(rd.love || 0)\r\n          if (!StorageData) {\r\n            localStorage.setItem(Comments.Info.like, JSON.stringify([id]))\r\n          } else {\r\n            StorageData.push(id)\r\n            localStorage.setItem(Comments.Info.like, JSON.stringify(StorageData))\r\n          }\r\n        }\r\n      })\r\n    })\r\n  },\r\n  cancelRelay() {\r\n    $('#topid').val('0')// 顶级评论id\r\n    $('#superid').val('0')// 回复的id\r\n    if ($('#comments-main-replay').length !== 0) {\r\n      $('#comments-main-replay').remove()\r\n    }\r\n  },\r\n  getCommentCookie() {\r\n    const data = {}\r\n    data.author = Ajax.getCookie(Comments.Info.author)\r\n    data.contact = Ajax.getCookie(Comments.Info.contact)\r\n    data.website = Ajax.getCookie(Comments.Info.website)\r\n    return data\r\n  },\r\n  setLocalStorage(data) {\r\n    let StorageData = localStorage.getItem(Comments.Info.data)\r\n    if (!StorageData) {\r\n      localStorage.setItem(Comments.Info.data, JSON.stringify([data]))\r\n    } else {\r\n      StorageData = JSON.parse(StorageData)\r\n      StorageData.push(data)\r\n      localStorage.setItem(Comments.Info.data, JSON.stringify(StorageData))\r\n    }\r\n  },\r\n  loadComments() {\r\n    const data = $('#comments-data').data()\r\n    let pageNum = data.pageNum\r\n    if (pageNum !== 0 && !pageNum) {\r\n      pageNum = -1\r\n    }\r\n    if (data.pages && pageNum === data.pages - 1) {\r\n      return Comments.endLoading(false, '———— The End ————')\r\n    }\r\n    const contentid = $('#contentid').val() || '0'\r\n    pageNum += 1\r\n    const menuItem = $('#pc-menu').find('li.menu-item.active:first')\r\n    const style = menuItem.data('style') || 'content'\r\n    const alias = menuItem.data('alias')\r\n    Ajax.post('/loadComments', {\r\n      contentid,\r\n      pageNum,\r\n      style,\r\n      alias\r\n    }\r\n    , Comments.InitComments)\r\n  },\r\n  endLoading(hasComment, text) {\r\n    const $commentsLoading = $('#comments-loading')\r\n    if (hasComment) {\r\n      $commentsLoading.remove()\r\n    } else {\r\n      if ($commentsLoading.length === 0) {\r\n        Comments.addLoading(text)\r\n      }\r\n      $commentsLoading.text(text)\r\n    }\r\n  },\r\n  addLoading(text) {\r\n    text = text ? text : '评论加载中&hellip;'\r\n    const loadingTemplate = `<div id=\"comments-loading\" class=\"text-muted text-center font-13\">${text}</div>`\r\n    const $commentsData = $('#comments-data')\r\n    const commentsLoading = $('#comments-loading')\r\n    if (commentsLoading.length === 0) {\r\n      $(loadingTemplate).appendTo($commentsData).offset()\r\n    }\r\n  },\r\n  InitComments(base) {\r\n    // 属于服务内部错误\r\n    if (!base || typeof base !== 'object' || !base.data) {\r\n      return Comments.endLoading(false, '暂无评论')\r\n    }\r\n    // 处理数据结构\r\n    const page = base.data\r\n    // 数据错误\r\n    if (!page || !Tool.isJSON(page) || !page.result || !Tool.isJSON(page.result) || page.result.length === 0) {\r\n      return Comments.endLoading(false, '暂无评论')\r\n    }\r\n    Comments.endLoading(true)\r\n    const list = page.result\r\n    const $commentsData = $('#comments-data')\r\n    let StorageData = localStorage.getItem(Comments.Info.like)\r\n    if (StorageData) {\r\n      StorageData = JSON.parse(StorageData)\r\n    }\r\n    for (const i in list) {\r\n      let temp = Comments.mediaFisrtTemplate\r\n      const item = list[i]\r\n      let ctime = item.ctime\r\n      if (moment) {\r\n        const nowyear = moment().year()\r\n        ctime = moment(ctime, 'YYYY-MM-DD HH:mm:ss')\r\n        if (nowyear === ctime.year()) {\r\n          ctime = ctime.format('MM-DD HH:mm')\r\n        }\r\n      }\r\n      let itemActive = ''\r\n      if (StorageData && StorageData.indexOf(item.id) > -1) {\r\n        itemActive = 'active'\r\n      }\r\n      temp = temp.replace(new RegExp('{{author}}', 'g'), item.author)\r\n        .replace(new RegExp('{{website}}', 'g'), item.website || 'javascript:void(0)')\r\n        .replace(new RegExp('{{active}}', 'g'), itemActive)\r\n        .replace(new RegExp('{{love}}', 'g'), item.love)\r\n        .replace(new RegExp('{{comment}}', 'g'), item.comment)\r\n        .replace(new RegExp('{{ctime}}', 'g'), ctime)\r\n      const $temp = $(temp)\r\n      const $mediaBody = $temp.find('.media-body:first')\r\n      $mediaBody.data('comment_data', item)\r\n      const replys = item.replys\r\n      if (replys) {\r\n        for (const z in replys) {\r\n          let replayTemp = Comments.mediaReplayTemplate\r\n          let superTemp = Comments.superTemplate\r\n          const reply = replys[z]\r\n          let replyTime = reply.ctime\r\n          if (moment) {\r\n            const cnowyear = moment().year()\r\n            replyTime = moment(replyTime, 'YYYY-MM-DD HH:mm:ss')\r\n            if (cnowyear === replyTime.year()) {\r\n              replyTime = replyTime.format('MM-DD HH:mm')\r\n            }\r\n          }\r\n          let replayActive = ''\r\n          if (StorageData && StorageData.indexOf(reply.id) > -1) {\r\n            replayActive = 'active'\r\n          }\r\n          replayTemp = replayTemp.replace(new RegExp('{{author}}', 'g'), reply.author)\r\n            .replace(new RegExp('{{website}}', 'g'), reply.website || 'javascript:void(0)')\r\n            .replace(new RegExp('{{active}}', 'g'), replayActive)\r\n            .replace(new RegExp('{{love}}', 'g'), reply.love)\r\n            .replace(new RegExp('{{comment}}', 'g'), reply.comment)\r\n            .replace(new RegExp('{{ctime}}', 'g'), replyTime)\r\n          if (reply.topid !== '0' && reply.topid !== reply.superid) {\r\n            superTemp = superTemp.replace(new RegExp('{{superauthor}}', 'g'), reply.superauthor || '外星人')\r\n              .replace(new RegExp('{{superwebsite}}', 'g'), reply.superwebsite || 'javascript:void(0)')\r\n          } else {\r\n            superTemp = ''\r\n          }\r\n          replayTemp = replayTemp.replace(new RegExp('{{superauthorTemplate}}', 'g'), superTemp)\r\n\r\n          const $replayTemp = $(replayTemp).appendTo($mediaBody)\r\n          $replayTemp.find('.media-body:first').data('comment_data', reply)\r\n        }\r\n      }\r\n      $temp.appendTo($commentsData).initUI()\r\n    }\r\n    $('#comments-nums').text(`(${page.total})`)\r\n    delete page.result\r\n    page.pageNum = page.pageNum > 0 ? page.pageNum - 1 : 0\r\n    $commentsData.data(page)\r\n  }\r\n}\r\nexport default Comments\r\n"],"names":["Comments","$comment","$author","$contact","$website","replayTemplate","mediaFisrtTemplate","mediaReplayTemplate","superTemplate","Info","prefix","author","contact","website","data","like","cookieDay","dataDay","init","$","CommentData","getCommentCookie","replace","val","loadComments","commentLike","relay","window","on","windowHeight","height","scrollTop","docHeight","document","pensen","toFixed","length","addLoading","setTimeout","chk","nullMsg","trim","push","Toast","err","join","authorName","contactVal","Tool","chkEmail","chkQQ","websiteVal","chkHttp","bef","$this","Ajax","setCookie","publishtime","moment","format","Date","getTime","JSON","stringify","setLocalStorage","menuItem","find","style","alias","contentid","suc","location","reload","event","preventDefault","trigger","remove","$body","closest","$subbody","id","subdata","$header","temp","RegExp","appendTo","parents","StorageData","localStorage","getItem","parse","indexOf","warn","get","base","result","rd","addClass","text","love","setItem","cancelRelay","getCookie","pageNum","pages","endLoading","post","InitComments","hasComment","$commentsLoading","loadingTemplate","$commentsData","commentsLoading","offset","page","isJSON","list","i","item","ctime","nowyear","year","itemActive","comment","$temp","$mediaBody","replys","z","replayTemp","superTemp","reply","replyTime","cnowyear","replayActive","topid","superid","superauthor","superwebsite","$replayTemp","initUI","total"],"mappings":"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"}