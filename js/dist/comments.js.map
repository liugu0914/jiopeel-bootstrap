{"version":3,"file":"comments.js","sources":["../src/comments.js"],"sourcesContent":["/* eslint-disable no-script-url */\r\n/* eslint-disable complexity */\r\n/* eslint-disable consistent-return */\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nconst Comments = {\r\n  $comment: null,\r\n  $author: null,\r\n  $contact: null,\r\n  $website: null,\r\n  emoji: [{\r\n    name: '疑问',\r\n    id: 'cs-svg-yiwen'\r\n  }, {\r\n    name: '晕',\r\n    id: 'cs-svg-yun'\r\n  }, {\r\n    name: '流鼻血',\r\n    id: 'cs-svg-liubixie'\r\n  }, {\r\n    name: '什么',\r\n    id: 'cs-svg-shimo'\r\n  }, {\r\n    name: '点赞',\r\n    id: 'cs-svg-dianzan'\r\n  }, {\r\n    name: '鼻涕',\r\n    id: 'cs-svg-biti'\r\n  }, {\r\n    name: '奋斗',\r\n    id: 'cs-svg-fendou'\r\n  }, {\r\n    name: '呼气',\r\n    id: 'cs-svg-huqi'\r\n  }, {\r\n    name: '哼',\r\n    id: 'cs-svg-heng'\r\n  }, {\r\n    name: '骷髅',\r\n    id: 'cs-svg-kulou'\r\n  }, {\r\n    name: '冷',\r\n    id: 'cs-svg-leng'\r\n  }, {\r\n    name: '讨厌',\r\n    id: 'cs-svg-taoyan1'\r\n  }, {\r\n    name: '睡醒',\r\n    id: 'cs-svg-shuixing'\r\n  }, {\r\n    name: '爱你',\r\n    id: 'cs-svg-aini'\r\n  }, {\r\n    name: '爱心',\r\n    id: 'cs-svg-aixin1'\r\n  }, {\r\n    name: '炸弹',\r\n    id: 'cs-svg-zhadan'\r\n  }, {\r\n    name: '心碎',\r\n    id: 'cs-svg-xinsui'\r\n  }, {\r\n    name: '骂人',\r\n    id: 'cs-svg-maren'\r\n  }, {\r\n    name: '猪头',\r\n    id: 'cs-svg-zhutou'\r\n  }, {\r\n    name: '企鹅',\r\n    id: 'cs-svg-qie'\r\n  }, {\r\n    name: '幽灵',\r\n    id: 'cs-svg-youling'\r\n  }, {\r\n    name: '啊',\r\n    id: 'cs-svg-a'\r\n  }, {\r\n    name: '闭嘴',\r\n    id: 'cs-svg-bizui'\r\n  }, {\r\n    name: '白眼',\r\n    id: 'cs-svg-baiyan'\r\n  }, {\r\n    name: '爱心',\r\n    id: 'cs-svg-aixin'\r\n  }, {\r\n    name: '大惊',\r\n    id: 'cs-svg-dajing'\r\n  }, {\r\n    name: '呲牙',\r\n    id: 'cs-svg-ziya'\r\n  }, {\r\n    name: '大笑',\r\n    id: 'cs-svg-daxiao'\r\n  }, {\r\n    name: '饿死',\r\n    id: 'cs-svg-esi'\r\n  }, {\r\n    name: '发呆',\r\n    id: 'cs-svg-fadai'\r\n  }, {\r\n    name: '犯困',\r\n    id: 'cs-svg-fankun'\r\n  }, {\r\n    name: '尴尬',\r\n    id: 'cs-svg-ganga'\r\n  }, {\r\n    name: '愤怒',\r\n    id: 'cs-svg-fennu'\r\n  }, {\r\n    name: '汗颜',\r\n    id: 'cs-svg-hanyan'\r\n  }, {\r\n    name: '惊恐',\r\n    id: 'cs-svg-jingkong'\r\n  }, {\r\n    name: '好吃',\r\n    id: 'cs-svg-haochi'\r\n  }, {\r\n    name: '恶魔',\r\n    id: 'cs-svg-emo'\r\n  }, {\r\n    name: '惊悚',\r\n    id: 'cs-svg-jingsong'\r\n  }, {\r\n    name: '惊讶',\r\n    id: 'cs-svg-jingya'\r\n  }, {\r\n    name: '开心',\r\n    id: 'cs-svg-kaixin'\r\n  }, {\r\n    name: '冷酷',\r\n    id: 'cs-svg-lengku'\r\n  }, {\r\n    name: '大闹',\r\n    id: 'cs-svg-danao'\r\n  }, {\r\n    name: '流口水',\r\n    id: 'cs-svg-liukoushui'\r\n  }, {\r\n    name: '流泪',\r\n    id: 'cs-svg-liulei'\r\n  }, {\r\n    name: '懵逼',\r\n    id: 'cs-svg-mengbi'\r\n  }, {\r\n    name: '面无表情',\r\n    id: 'cs-svg-mianwubiaoqing'\r\n  }, {\r\n    name: '难过',\r\n    id: 'cs-svg-nanguo'\r\n  }, {\r\n    name: '睡着',\r\n    id: 'cs-svg-shuizhuo'\r\n  }, {\r\n    name: '讨厌',\r\n    id: 'cs-svg-taoyan'\r\n  }, {\r\n    name: '贪吃',\r\n    id: 'cs-svg-tanchi'\r\n  }, {\r\n    name: '死了',\r\n    id: 'cs-svg-siliao'\r\n  }, {\r\n    name: '调皮',\r\n    id: 'cs-svg-tiaopi'\r\n  }, {\r\n    name: '笑出泪',\r\n    id: 'cs-svg-xiaochulei'\r\n  }, {\r\n    name: '无聊',\r\n    id: 'cs-svg-wuliao'\r\n  }, {\r\n    name: '星星眼',\r\n    id: 'cs-svg-xingxingyan'\r\n  }, {\r\n    name: '斜眼',\r\n    id: 'cs-svg-xieyan'\r\n  }, {\r\n    name: '吓死',\r\n    id: 'cs-svg-xiasi'\r\n  }, {\r\n    name: '笑脸',\r\n    id: 'cs-svg-xiaolian'\r\n  }, {\r\n    name: '酷',\r\n    id: 'cs-svg-ku'\r\n  }, {\r\n    name: '生气',\r\n    id: 'cs-svg-shengqi'\r\n  }, {\r\n    name: '又死了',\r\n    id: 'cs-svg-yousiliao'\r\n  }, {\r\n    name: '恩~',\r\n    id: 'cs-svg-en'\r\n  }, {\r\n    name: '不舒服',\r\n    id: 'cs-svg-bushufu'\r\n  }, {\r\n    name: '便便',\r\n    id: 'cs-svg-bianbian'\r\n  }, {\r\n    name: '犯困',\r\n    id: 'cs-svg-fankun1'\r\n  }, {\r\n    name: '飞吻',\r\n    id: 'cs-svg-feiwen'\r\n  }, {\r\n    name: '感冒',\r\n    id: 'cs-svg-ganmao'\r\n  }, {\r\n    name: '坏笑',\r\n    id: 'cs-svg-huaixiao'\r\n  }, {\r\n    name: '流汗',\r\n    id: 'cs-svg-liuhan'\r\n  }, {\r\n    name: '呕吐',\r\n    id: 'cs-svg-outu'\r\n  }, {\r\n    name: '瞌睡',\r\n    id: 'cs-svg-keshui'\r\n  }, {\r\n    name: '忍者',\r\n    id: 'cs-svg-renzhe'\r\n  }, {\r\n    name: '三条线',\r\n    id: 'cs-svg-santiaoxian'\r\n  }, {\r\n    name: '怪物',\r\n    id: 'cs-svg-guaiwu'\r\n  }, {\r\n    name: '受伤',\r\n    id: 'cs-svg-shoushang'\r\n  }, {\r\n    name: '天使',\r\n    id: 'cs-svg-tianshi'\r\n  }, {\r\n    name: '衰',\r\n    id: 'cs-svg-shuai'\r\n  }, {\r\n    name: '献吻',\r\n    id: 'cs-svg-xianwen'\r\n  }, {\r\n    name: '笑掉大牙',\r\n    id: 'cs-svg-xiaodiaodaya'\r\n  }, {\r\n    name: '凶',\r\n    id: 'cs-svg-xiong'\r\n  }],\r\n  emojiTemplate: `<div class=\"p-1 emoji-item\" title=\"{{name}}\" data-title=\"{{name}}\">\r\n  <a href=\"#\">\r\n      <svg class=\"cs-svg\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#{{id}}\"></use>\r\n      </svg>\r\n  </a>\r\n</div>`,\r\n  replayTemplate: `<span id=\"comments-main-replay\" class=\"comments-main-replay\">\r\n  <span class=\"media-info-span\">\r\n      回复\r\n          <i class=\"cs cs-xiangyou1\"></i>\r\n      </span>\r\n  <span class=\"media-info-span\">\r\n          <a class=\"media-body-img\" href=\"#\">\r\n              <img src=\"{{img}}\" class=\"w-32 rounded-circle\">\r\n          </a>\r\n      </span>\r\n  <span class=\"media-info-span\">\r\n          <a href=\"{{website}}\">{{author}}</a>\r\n      </span>\r\n  <span  class=\"btn btn-sm btn-outline-dark float-right pointer pl-1 pr-1\" onclick=\"Comments.cancelRelay()\">\r\n     取消回复\r\n  </span>\r\n</span>`,\r\n  mediaFisrtTemplate: `<div class=\"media media-first pt-3 pb-3\">\r\n<a class=\"pr-1 pr-md-2\" href=\"javascript:void(0)\">\r\n    <img src=\"/img/user.png\" class=\"w-32 rounded-circle\" alt=\"Generic placeholder image\">\r\n</a>\r\n<div class=\"media-body\">\r\n    <div class=\"media-content\">\r\n        <h5 class=\"mt-0 mb-1\">\r\n            <a href=\"{{website}}\" >{{author}}</a>\r\n            <span class=\"media-info-span float-right font-15\">\r\n            <a href=\"#\" class=\"comments-like {{active}}\">\r\n                <i class=\"cs cs-dianzan\"></i>\r\n                <span>{{love}}</span>\r\n            </a>\r\n        </span>\r\n        </h5>\r\n        <p>{{comment}}</p>\r\n        <div class=\"media-info\">\r\n            <small class=\"text-muted\">\r\n                <span class=\"media-info-span\">{{ctime}}</span>\r\n                <span class=\"media-info-span float-right\">\r\n                <a class=\"comments-replay\"  href=\"#\">\r\n                    <i class=\"cs cs-pinglun\"></i>\r\n                    回复\r\n                </a>\r\n            </span>\r\n            </small>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>`,\r\n  mediaReplayTemplate: `<div class=\"media mt-2\">\r\n        <a class=\"pr-1\" href=\"javascript:void(0)\">\r\n            <img src=\"/img/user.png\" class=\"avatar-xs rounded-circle\" alt=\"Generic placeholder image\">\r\n        </a>\r\n        <div class=\"media-body\">\r\n            <div class=\"media-content\">\r\n            <h5 class=\"mt-0 mb-1\">\r\n                <span class=\"media-info-span\">\r\n              <a href=\"{{website}}\" >\r\n                {{author}}\r\n              </a>\r\n                {{superauthorTemplate}}\r\n                <span class=\"media-info-span float-right font-15\">\r\n                    <a href=\"#\"  class=\"comments-like {{active}}\"><i class=\"cs cs-dianzan\"></i> <span>{{love}}</span></a>\r\n                </span>\r\n            </h5>\r\n            <p>{{comment}}</p>\r\n            </div>\r\n            <div class=\"media-info\">\r\n                <small class=\"text-muted\">\r\n                    <span class=\"media-info-span\">{{ctime}}</span>\r\n                    <span class=\"media-info-span float-right\">\r\n                        <a  href=\"#\" class=\"comments-replay\"> <i class=\"cs cs-pinglun\"></i> 回复</a>\r\n                    </span>\r\n                </small>\r\n            </div>\r\n        </div>\r\n    </div>`,\r\n  superTemplate: `</span>\r\n                <span class=\"media-info-span\">\r\n                <i class=\"cs cs-xiangyou1\"></i>\r\n            </span>\r\n            <span class=\"media-info-span\">\r\n                <a class=\"media-body-img\" href=\"javascript:void(0)\">\r\n                    <img src=\"/img/user.png\" class=\"avatar-xs rounded-circle\" alt=\"Generic placeholder image\">\r\n                </a>\r\n            </span>\r\n            <span class=\"media-info-span\">\r\n                <a href=\"{{superwebsite}}\" >\r\n                {{superauthor}}\r\n                </a>\r\n            </span>`,\r\n  Info: {\r\n    prefix: 'jiopeel_comment_',\r\n    author: 'jiopeel_comment_author',\r\n    contact: 'jiopeel_comment_contact',\r\n    website: 'jiopeel_comment_website',\r\n    data: 'jiopeel_comment_data',\r\n    like: 'jiopeel_comment_like',\r\n    cookieDay: 15,\r\n    dataDay: 0.5\r\n  },\r\n  init() {\r\n    Comments.$comment = $('#comment')\r\n    Comments.$author = $('#author')\r\n    Comments.$contact = $('#contact')\r\n    Comments.$website = $('#website')\r\n    const CommentData = Comments.getCommentCookie()\r\n    const author = CommentData[Comments.Info.author.replace(Comments.Info.prefix, '')]\r\n    const contact = CommentData[Comments.Info.contact.replace(Comments.Info.prefix, '')]\r\n    const website = CommentData[Comments.Info.website.replace(Comments.Info.prefix, '')]\r\n    if (author) {\r\n      Comments.$author.val(author)\r\n    }\r\n    if (contact) {\r\n      Comments.$contact.val(contact)\r\n    }\r\n    if (website) {\r\n      Comments.$website.val(website)\r\n    }\r\n    Comments.loadComments()\r\n    Comments.commentLike()\r\n    Comments.relay()\r\n    Comments.startEmoji()\r\n    $(window).on('resize scroll', () => {\r\n      const windowHeight = $(window).height()// 当前窗口的高度\r\n      const scrollTop = $(window).scrollTop()// 当前滚动条从上往下滚动的距离\r\n      const docHeight = $(document).height() // 当前文档的高度\r\n      // 当 滚动条距底部的距离 + 滚动条滚动的距离 >= 文档的高度 - 窗口的高度\r\n      // 换句话说：（滚动条滚动的距离 + 窗口的高度 = 文档的高度）  这个是基本的公式\r\n      let pensen = scrollTop / (docHeight - windowHeight) * 100\r\n      pensen = pensen.toFixed(0)\r\n      if (pensen >= 100) {\r\n        if ($('#comments-loading').length !== 0) {\r\n          return\r\n        }\r\n        Comments.addLoading()\r\n        setTimeout(Comments.loadComments, 200)\r\n      }\r\n    })\r\n  },\r\n  startEmoji() {\r\n    const btn = $('#emoji')\r\n    if (btn.length === 0) {\r\n      return\r\n    }\r\n    const parent = btn.parent()\r\n    const div = btn.next()\r\n    parent.on('show.bs.dropdown', () => {\r\n      if (parent.data('emoji')) {\r\n        return\r\n      }\r\n      for (const i in Comments.emoji) {\r\n        const item = Comments.emoji[i]\r\n        let temp = Comments.emojiTemplate\r\n        temp = temp.replace(new RegExp('{{id}}', 'g'), item.id)\r\n          .replace(new RegExp('{{name}}', 'g'), item.name)\r\n        $(temp).appendTo(div)\r\n      }\r\n      div.find('.emoji-item').on('click', (event) => {\r\n        if (event) {\r\n          event.preventDefault()\r\n        }\r\n        Comments.$comment.val(`${Comments.$comment.val()}[${$(event.currentTarget).data('title')}]`)\r\n      })\r\n      parent.data('emoji', true)\r\n    })\r\n  },\r\n  contentHandle(text) {\r\n    text = text.replace(/</g, '&lt;').replace(/</g, '&gt;').replace(/\\[[A-Z~\\u4e00-\\u9fa5]+\\]/gi, (str) => {\r\n      for (let i = 0; i < Comments.emoji.length; i++) {\r\n        const item = Comments.emoji[i]\r\n        if (str === `[${item.name}]`) {\r\n          return `<svg class=\"cs-svg\" aria-hidden=\"true\"><use xlink:href=\"#${item.id}\"></use></svg>`\r\n        }\r\n      }\r\n      return str\r\n    })\r\n    return text\r\n  },\r\n  chk() {\r\n    const nullMsg = []\r\n    if (!Comments.$comment.val() || !Comments.$comment.val().trim()) {\r\n      nullMsg.push('评论内容')\r\n    }\r\n    if (!Comments.$author.val() || !Comments.$author.val().trim()) {\r\n      nullMsg.push('昵称')\r\n    }\r\n    if (!Comments.$contact.val() || !Comments.$contact.val().trim()) {\r\n      nullMsg.push('Email/QQ')\r\n    }\r\n    if (nullMsg.length > 0) {\r\n      Toast.err(`${nullMsg.join(',  ')}不能为空`)\r\n      return false\r\n    }\r\n    const authorName = Comments.$author.val()\r\n    if (authorName.length > 20) {\r\n      Toast.err('昵称过长,不能大于20个字符')\r\n      return false\r\n    }\r\n    const contactVal = Comments.$contact.val()\r\n    if (!Tool.chkEmail(contactVal) && !Tool.chkQQ(contactVal)) {\r\n      Toast.err('Email/QQ格式不正确')\r\n      return false\r\n    }\r\n    const websiteVal = Comments.$website.val()\r\n    if (websiteVal && websiteVal.trim() && !Tool.chkHttp(websiteVal)) {\r\n      Toast.err('网站格式不正确,请以http(s)://开头')\r\n      return false\r\n    }\r\n    return true\r\n  },\r\n  bef($this, data) {\r\n    Ajax.setCookie(Comments.Info.author, data.author, Comments.Info.cookieDay)\r\n    Ajax.setCookie(Comments.Info.contact, data.contact, Comments.Info.cookieDay)\r\n    Ajax.setCookie(Comments.Info.website, data.website, Comments.Info.cookieDay)\r\n    // 待审核的评论\r\n    data.publishtime = moment ? moment().format('YYYY-MM-DD HH:mm') : new Date().getTime()\r\n    Ajax.setCookie(Comments.Info.data, JSON.stringify(data), Comments.Info.dataDay)\r\n    Comments.setLocalStorage(data)\r\n    const menuItem = $('#pc-menu').find('li.menu-item.active:first')\r\n    const style = menuItem.data('style') || 'content'\r\n    const alias = menuItem.data('alias')\r\n    data.contentid = $('#contentid').val() || '0'\r\n    data.style = style\r\n    data.alias = alias\r\n    return data\r\n  },\r\n  suc() {\r\n    window.location.reload()\r\n  },\r\n  relay() {\r\n    $(document).on('click', 'a.comments-replay', function (event) {\r\n      if (event) {\r\n        event.preventDefault()\r\n      }\r\n      $('#scroll_to_comments').trigger('click')// 滑动到评论\r\n      if ($('#comments-main-replay').length !== 0) {\r\n        $('#comments-main-replay').remove()\r\n      }\r\n      const $body = $(this).closest('.media-first').find('.media-body:first')\r\n      const $subbody = $(this).closest('.media-body')\r\n      const data = $body.data('comment_data') || {}\r\n      $('#topid').val(data.id)// 顶级评论id\r\n      const subdata = $subbody.data('comment_data') || {}\r\n      $('#superid').val(subdata.id)// 回复的id\r\n\r\n      const $header = $('#comments-main-header')\r\n      let temp = Comments.replayTemplate\r\n      temp = temp.replace(new RegExp('{{img}}', 'g'), '/img/user.png')\r\n        .replace(new RegExp('{{website}}', 'g'), subdata.website || 'javascript:void(0)')\r\n        .replace(new RegExp('{{author}}', 'g'), subdata.author || '外星人')\r\n      $(temp).appendTo($header)\r\n      setTimeout(() => {\r\n        $('#comment').trigger('focus')\r\n      }, 200)\r\n    })\r\n  },\r\n  commentLike() {\r\n    $(document).on('click', 'a.comments-like', function (event) {\r\n      if (event) {\r\n        event.preventDefault()\r\n      }\r\n      const $this = $(this)\r\n      const data = $this.parents('.media-body').data('comment_data')\r\n      if (!data || !data.id) {\r\n        return\r\n      }\r\n      const id = data.id\r\n      let StorageData = localStorage.getItem(Comments.Info.like)\r\n      if (StorageData) {\r\n        StorageData = JSON.parse(StorageData)\r\n        if (StorageData.indexOf(id) > -1) {\r\n          return Toast.warn('你已经点过赞了')\r\n        }\r\n      }\r\n      Ajax.get('/CommentLike', {\r\n        id\r\n      }, (base) => {\r\n        if (base.result && base.data) {\r\n          const rd = base.data\r\n          $this.addClass('active').find('span').text(rd.love || 0)\r\n          if (!StorageData) {\r\n            localStorage.setItem(Comments.Info.like, JSON.stringify([id]))\r\n          } else {\r\n            StorageData.push(id)\r\n            localStorage.setItem(Comments.Info.like, JSON.stringify(StorageData))\r\n          }\r\n        }\r\n      })\r\n    })\r\n  },\r\n  cancelRelay() {\r\n    $('#topid').val('0')// 顶级评论id\r\n    $('#superid').val('0')// 回复的id\r\n    if ($('#comments-main-replay').length !== 0) {\r\n      $('#comments-main-replay').remove()\r\n    }\r\n  },\r\n  getCommentCookie() {\r\n    const data = {}\r\n    data.author = Ajax.getCookie(Comments.Info.author)\r\n    data.contact = Ajax.getCookie(Comments.Info.contact)\r\n    data.website = Ajax.getCookie(Comments.Info.website)\r\n    return data\r\n  },\r\n  setLocalStorage(data) {\r\n    let StorageData = localStorage.getItem(Comments.Info.data)\r\n    if (!StorageData) {\r\n      localStorage.setItem(Comments.Info.data, JSON.stringify([data]))\r\n    } else {\r\n      StorageData = JSON.parse(StorageData)\r\n      StorageData.push(data)\r\n      localStorage.setItem(Comments.Info.data, JSON.stringify(StorageData))\r\n    }\r\n  },\r\n  loadComments() {\r\n    const data = $('#comments-data').data()\r\n    let pageNum = data.pageNum\r\n    if (pageNum !== 0 && !pageNum) {\r\n      pageNum = -1\r\n    }\r\n    if (data.pages && pageNum === data.pages - 1) {\r\n      return Comments.endLoading(false, '———— The End ————')\r\n    }\r\n    const contentid = $('#contentid').val() || '0'\r\n    pageNum += 1\r\n    const menuItem = $('#pc-menu').find('li.menu-item.active:first')\r\n    const style = menuItem.data('style') || 'content'\r\n    const alias = menuItem.data('alias')\r\n    Ajax.post('/loadComments', {\r\n      contentid,\r\n      pageNum,\r\n      style,\r\n      alias\r\n    }, Comments.InitComments)\r\n  },\r\n  endLoading(hasComment, text) {\r\n    const $commentsLoading = $('#comments-loading')\r\n    if (hasComment) {\r\n      $commentsLoading.remove()\r\n    } else {\r\n      if ($commentsLoading.length === 0) {\r\n        Comments.addLoading(text)\r\n      }\r\n      $commentsLoading.text(text)\r\n    }\r\n  },\r\n  addLoading(text) {\r\n    text = text ? text : '评论加载中&hellip;'\r\n    const loadingTemplate = `<div id=\"comments-loading\" class=\"text-muted text-center font-13\">${text}</div>`\r\n    const $commentsData = $('#comments-data')\r\n    const commentsLoading = $('#comments-loading')\r\n    if (commentsLoading.length === 0) {\r\n      $(loadingTemplate).appendTo($commentsData).offset()\r\n    }\r\n  },\r\n  InitComments(base) {\r\n    // 属于服务内部错误\r\n    if (!base || typeof base !== 'object' || !base.data) {\r\n      return Comments.endLoading(false, '暂无评论')\r\n    }\r\n    // 处理数据结构\r\n    const page = base.data\r\n    // 数据错误\r\n    if (!page || !Tool.isJSON(page) || !page.result || !Tool.isJSON(page.result) || page.result.length === 0) {\r\n      return Comments.endLoading(false, '暂无评论')\r\n    }\r\n    Comments.endLoading(true)\r\n    const list = page.result\r\n    const $commentsData = $('#comments-data')\r\n    let StorageData = localStorage.getItem(Comments.Info.like)\r\n    if (StorageData) {\r\n      StorageData = JSON.parse(StorageData)\r\n    }\r\n    for (const i in list) {\r\n      let temp = Comments.mediaFisrtTemplate\r\n      const item = list[i]\r\n      let ctime = item.ctime\r\n      if (moment) {\r\n        const nowyear = moment().year()\r\n        ctime = moment(ctime, 'YYYY-MM-DD HH:mm:ss')\r\n        if (nowyear === ctime.year()) {\r\n          ctime = ctime.format('MM-DD HH:mm')\r\n        }\r\n      }\r\n      let itemActive = ''\r\n      if (StorageData && StorageData.indexOf(item.id) > -1) {\r\n        itemActive = 'active'\r\n      }\r\n      temp = temp.replace(new RegExp('{{author}}', 'g'), item.author)\r\n        .replace(new RegExp('{{website}}', 'g'), item.website || 'javascript:void(0)')\r\n        .replace(new RegExp('{{active}}', 'g'), itemActive)\r\n        .replace(new RegExp('{{love}}', 'g'), item.love)\r\n        .replace(new RegExp('{{comment}}', 'g'), Comments.contentHandle(item.comment))\r\n        .replace(new RegExp('{{ctime}}', 'g'), ctime)\r\n      const $temp = $(temp)\r\n      const $mediaBody = $temp.find('.media-body:first')\r\n      $mediaBody.data('comment_data', item)\r\n      const replys = item.replys\r\n      if (replys) {\r\n        for (const z in replys) {\r\n          let replayTemp = Comments.mediaReplayTemplate\r\n          let superTemp = Comments.superTemplate\r\n          const reply = replys[z]\r\n          let replyTime = reply.ctime\r\n          if (moment) {\r\n            const cnowyear = moment().year()\r\n            replyTime = moment(replyTime, 'YYYY-MM-DD HH:mm:ss')\r\n            if (cnowyear === replyTime.year()) {\r\n              replyTime = replyTime.format('MM-DD HH:mm')\r\n            }\r\n          }\r\n          let replayActive = ''\r\n          if (StorageData && StorageData.indexOf(reply.id) > -1) {\r\n            replayActive = 'active'\r\n          }\r\n          replayTemp = replayTemp.replace(new RegExp('{{author}}', 'g'), reply.author)\r\n            .replace(new RegExp('{{website}}', 'g'), reply.website || 'javascript:void(0)')\r\n            .replace(new RegExp('{{active}}', 'g'), replayActive)\r\n            .replace(new RegExp('{{love}}', 'g'), reply.love)\r\n            .replace(new RegExp('{{comment}}', 'g'), Comments.contentHandle(reply.comment))\r\n            .replace(new RegExp('{{ctime}}', 'g'), replyTime)\r\n          if (reply.topid !== '0' && reply.topid !== reply.superid) {\r\n            superTemp = superTemp.replace(new RegExp('{{superauthor}}', 'g'), reply.superauthor || '外星人')\r\n              .replace(new RegExp('{{superwebsite}}', 'g'), reply.superwebsite || 'javascript:void(0)')\r\n          } else {\r\n            superTemp = ''\r\n          }\r\n          replayTemp = replayTemp.replace(new RegExp('{{superauthorTemplate}}', 'g'), superTemp)\r\n\r\n          const $replayTemp = $(replayTemp).appendTo($mediaBody)\r\n          $replayTemp.find('.media-body:first').data('comment_data', reply)\r\n        }\r\n      }\r\n      $temp.appendTo($commentsData).initUI()\r\n    }\r\n    $('#comments-nums').text(`(${page.total})`)\r\n    delete page.result\r\n    page.pageNum = page.pageNum > 0 ? page.pageNum - 1 : 0\r\n    $commentsData.data(page)\r\n  }\r\n}\r\nexport default Comments\r\n"],"names":["Comments","$comment","$author","$contact","$website","emoji","name","id","emojiTemplate","replayTemplate","mediaFisrtTemplate","mediaReplayTemplate","superTemplate","Info","prefix","author","contact","website","data","like","cookieDay","dataDay","init","$","CommentData","getCommentCookie","replace","val","loadComments","commentLike","relay","startEmoji","window","on","windowHeight","height","scrollTop","docHeight","document","pensen","toFixed","length","addLoading","setTimeout","btn","parent","div","next","i","item","temp","RegExp","appendTo","find","event","preventDefault","currentTarget","contentHandle","text","str","chk","nullMsg","trim","push","Toast","err","join","authorName","contactVal","Tool","chkEmail","chkQQ","websiteVal","chkHttp","bef","$this","Ajax","setCookie","publishtime","moment","format","Date","getTime","JSON","stringify","setLocalStorage","menuItem","style","alias","contentid","suc","location","reload","trigger","remove","$body","closest","$subbody","subdata","$header","parents","StorageData","localStorage","getItem","parse","indexOf","warn","get","base","result","rd","addClass","love","setItem","cancelRelay","getCookie","pageNum","pages","endLoading","post","InitComments","hasComment","$commentsLoading","loadingTemplate","$commentsData","commentsLoading","offset","page","isJSON","list","ctime","nowyear","year","itemActive","comment","$temp","$mediaBody","replys","z","replayTemp","superTemp","reply","replyTime","cnowyear","replayActive","topid","superid","superauthor","superwebsite","$replayTemp","initUI","total"],"mappings":"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"}