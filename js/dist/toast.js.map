{"version":3,"file":"toast.js","sources":["../src/toast.js"],"sourcesContent":["import $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'toast'\nconst VERSION            = '1.0.0'\nconst DATA_KEY           = 'lyc.toast'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst JQUERY_NO_CONFLICT = $[NAME]\n\nconst Event = {\n  CLICK_DISMISS : `click.dismiss${EVENT_KEY}`\n}\n\nconst PositionClasses =\n['bottom-left',\n  'bottom-right',\n  'top-right',\n  'top-left',\n  'bottom-center',\n  'top-center',\n  'mid-center']\n\nconst DefaultIcons = ['success', 'error', 'info', 'warning']\n\n\nconst DefaultOptions = {\n  text: '',\n  heading: '',\n  showHideTransition: 'fade',\n  allowToastClose: true,\n  hideAfter: 3000,\n  loader: true,\n  loaderBg: '#9EC600',\n  stack: 5,\n  position: 'top-center',\n  bgColor: false,\n  textColor: false,\n  textAlign: 'left',\n  icon: false,\n  beforeShow() {\n    return null\n  },\n  afterShown() {\n    return null\n  },\n  beforeHide() {\n    return null\n  },\n  afterHidden() {\n    return null\n  }\n}\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Toast {\n  constructor(_options) {\n    this._toastEl = null\n    this.options = this.prepareOptions(_options)\n    this.process()\n  }\n\n  // Getters\n  static get VERSION() {\n    return VERSION\n  }\n\n  prepareOptions(options) {\n    let _options = {}\n    if (typeof options === 'string' || options instanceof Array) {\n      _options.text = options\n    } else {\n      _options = typeof options === 'object' ? options : {}\n    }\n    return {\n      ...DefaultOptions,\n      ..._options\n    }\n  }\n\n  process() {\n    this.setup()\n    this.addToDom()\n    this.position()\n    this.bindToast()\n    this.animate()\n  }\n\n  setup() {\n    let _toastContent = ''\n\n    this._toastEl = this._toastEl || $('<div></div>', {\n      class : 'jq-toast-single text-break'\n    })\n\n    // For the loader on top\n    _toastContent += '<span class=\"jq-toast-loader\"></span>'\n\n    // if (this.options.allowToastClose) {\n    //   _toastContent += '<span class=\"close-jq-toast-single\">&times;</span>'\n    // }\n\n    if (this.options.text instanceof Array) {\n      if (this.options.heading) {\n        _toastContent += `<h2 class=\"jq-toast-heading\">${this.options.heading}</h2>`\n      }\n\n      _toastContent += '<ul class=\"jq-toast-ul\">'\n      for (let i = 0; i < this.options.text.length; i++) {\n        _toastContent += `<li class=\"jq-toast-li\" id=\"jq-toast-item-${i}\">${this.options.text[i]}</li>`\n      }\n      _toastContent += '</ul>'\n    } else {\n      if (this.options.heading) {\n        _toastContent += `<h2 class=\"jq-toast-heading\">${this.options.heading}</h2>`\n      }\n      _toastContent += this.options.text\n    }\n\n    this._toastEl.html(_toastContent)\n\n    if (this.options.bgColor !== false) {\n      this._toastEl.css('background-color', this.options.bgColor)\n    }\n\n    if (this.options.textColor !== false) {\n      this._toastEl.css('color', this.options.textColor)\n    }\n\n    if (this.options.textAlign) {\n      this._toastEl.css('text-align', this.options.textAlign)\n    }\n\n    if (this.options.icon !== false) {\n      this._toastEl.addClass('jq-has-icon')\n\n      if ($.inArray(this.options.icon, DefaultIcons) !== -1) {\n        this._toastEl.addClass(`jq-icon-${this.options.icon}`)\n      }\n    }\n\n    if (this.options.class !== false) {\n      this._toastEl.addClass(this.options.class)\n    }\n  }\n\n  position() {\n    const two = 2\n    if (typeof this.options.position === 'string' && $.inArray(this.options.position, PositionClasses) !== -1) {\n      if (this.options.position === 'bottom-center') {\n        this._container.css({\n          left:  $(window).outerWidth() / two - this._container.outerWidth() / two,\n          bottom: 20\n        })\n      } else if (this.options.position === 'top-center') {\n        this._container.css({\n          left:  $(window).outerWidth() / two - this._container.outerWidth() / two,\n          top: 20\n        })\n      } else if (this.options.position === 'mid-center') {\n        this._container.css({\n          left:  $(window).outerWidth() / two - this._container.outerWidth() / two,\n          top:  $(window).outerHeight() / two - this._container.outerHeight() / two\n        })\n      } else {\n        this._container.addClass(this.options.position)\n      }\n    } else if (typeof this.options.position === 'object') {\n      this._container.css({\n        top : this.options.position.top ? this.options.position.top : 'auto',\n        bottom : this.options.position.bottom ? this.options.position.bottom : 'auto',\n        left : this.options.position.left ? this.options.position.left : 'auto',\n        right : this.options.position.right ? this.options.position.right : 'auto'\n      })\n    } else {\n      this._container.addClass('bottom-left')\n    }\n  }\n\n  bindToast() {\n    const that = this\n\n    this._toastEl.on('afterShown', () => {\n      that.processLoader()\n    })\n    if (this.options.allowToastClose) {\n      this._toastEl.on(Event.CLICK_DISMISS, (e) => {\n        e.preventDefault()\n\n        if (that.options.showHideTransition === 'fade') {\n          that._toastEl.trigger('beforeHide')\n          that._toastEl.fadeOut(() => {\n            that._toastEl.trigger('afterHidden')\n          })\n        } else if (that.options.showHideTransition === 'slide') {\n          that._toastEl.trigger('beforeHide')\n          that._toastEl.slideUp(() => {\n            that._toastEl.trigger('afterHidden')\n          })\n        } else {\n          that._toastEl.trigger('beforeHide')\n          that._toastEl.hide(() => {\n            that._toastEl.trigger('afterHidden')\n          })\n        }\n      })\n    }\n\n    if (typeof this.options.beforeShow === 'function') {\n      this._toastEl.on('beforeShow', () => {\n        that.options.beforeShow()\n      })\n    }\n\n    if (typeof this.options.afterShown === 'function') {\n      this._toastEl.on('afterShown', () => {\n        that.options.afterShown()\n      })\n    }\n\n    if (typeof this.options.beforeHide === 'function') {\n      this._toastEl.on('beforeHide', () => {\n        that.options.beforeHide()\n      })\n    }\n\n    if (typeof this.options.afterHidden === 'function') {\n      this._toastEl.on('afterHidden', () => {\n        that.options.afterHidden()\n      })\n    }\n  }\n\n  addToDom() {\n    let _container = $('.jq-toast-wrap')\n\n    if (_container.length === 0) {\n      _container = $('<div></div>', {\n        class: 'jq-toast-wrap',\n        role: 'alert',\n        'aria-live': 'polite'\n      })\n\n      $('body').append(_container)\n    } else if (!this.options.stack || isNaN(parseInt(this.options.stack, 10))) {\n      _container.empty()\n    }\n\n    _container.find('.jq-toast-single:hidden').remove()\n\n    _container.append(this._toastEl)\n\n    const ten = 10\n\n    if (this.options.stack && !isNaN(Number(this.options.stack), ten)) {\n      const _prevToastCount = _container.find('.jq-toast-single').length\n\n\n      const _extToastCount = _prevToastCount - this.options.stack\n\n      if (_extToastCount > 0) {\n        $('.jq-toast-wrap').find('.jq-toast-single').slice(0, _extToastCount).remove()\n      }\n    }\n\n    this._container = _container\n  }\n\n  canAutoHide() {\n    return this.options.hideAfter !== false && !isNaN(parseInt(this.options.hideAfter, 10))\n  }\n\n  processLoader() {\n    // Show the loader only, if auto-hide is on and loader is demanded\n    if (!this.canAutoHide() || this.options.loader === false) {\n      return false\n    }\n\n    const loader = this._toastEl.find('.jq-toast-loader')\n\n    const newLocal = 400\n    const milliseconds = 1000\n    // 400 is the default time that jquery uses for fade/slide\n    // Divide by 1000 for milliseconds to seconds conversion\n    const transitionTime = `${(this.options.hideAfter - newLocal) / milliseconds}s`\n    const loaderBg = this.options.loaderBg\n\n    let style = loader.attr('style') || ''\n    style = style.substring(0, style.indexOf('-webkit-transition')) // Remove the last transition definition\n\n    style += `-webkit-transition: width ${transitionTime} ease-in; \\\n              -o-transition: width ${transitionTime} ease-in; \\\n              transition: width ${transitionTime} ease-in; \\\n              background-color: ${loaderBg};`\n\n\n    return loader.attr('style', style).addClass('jq-toast-loaded')\n  }\n\n  animate() {\n    this._toastEl.hide()\n\n    this._toastEl.trigger('beforeShow')\n\n    if (this.options.showHideTransition.toLowerCase() === 'fade') {\n      this._toastEl.fadeIn(() => {\n        this._toastEl.trigger('afterShown')\n      })\n    } else if (this.options.showHideTransition.toLowerCase() === 'slide') {\n      this._toastEl.slideDown(() => {\n        this._toastEl.trigger('afterShown')\n      })\n    } else {\n      this._toastEl.show(() => {\n        this._toastEl.trigger('afterShown')\n      })\n    }\n\n    if (this.canAutoHide()) {\n      window.setTimeout(() => {\n        if (this.options.showHideTransition.toLowerCase() === 'fade') {\n          this._toastEl.trigger('beforeHide')\n          this._toastEl.fadeOut(() => {\n            this._toastEl.trigger('afterHidden')\n          })\n        } else if (this.options.showHideTransition.toLowerCase() === 'slide') {\n          this._toastEl.trigger('beforeHide')\n          this._toastEl.slideUp(() => {\n            this._toastEl.trigger('afterHidden')\n          })\n        } else {\n          this._toastEl.trigger('beforeHide')\n          this._toastEl.hide(() => {\n            this._toastEl.trigger('afterHidden')\n          })\n        }\n      }, this.options.hideAfter)\n    }\n  }\n\n  // Staticx\n  static suc(text) {\n    const option = {\n      heading: '成功',\n      text,\n      position: 'top-center',\n      hideAfter :1500,\n      stack: false,\n      icon: 'success'\n    }\n    return new Toast(option)\n  }\n\n  static err(text) {\n    const option = {\n      heading: '错误',\n      text,\n      position: 'top-center',\n      hideAfter :3000,\n      stack: false,\n      icon: 'error'\n    }\n    return new Toast(option)\n  }\n\n  static info(text) {\n    const option = {\n      heading: '提示',\n      text,\n      position: 'top-center',\n      hideAfter :1500,\n      stack: false,\n      icon: 'info'\n    }\n    return new Toast(option)\n  }\n\n  static warn(text) {\n    const option = {\n      heading: '警告',\n      text,\n      position: 'top-center',\n      hideAfter :1500,\n      stack: false,\n      icon: 'warning'\n    }\n    return new Toast(option)\n  }\n\n  static reset(resetWhat) {\n    if (resetWhat === 'all') {\n      $('.jq-toast-wrap').remove()\n    } else {\n      this._toastEl.remove()\n    }\n  }\n\n  static update(options) {\n    this.prepareOptions(options, this.options)\n    this.setup()\n    this.bindToast()\n  }\n\n  static _jQueryInterface(options) {\n    return new Toast(options)\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.extend({\n  [NAME]:Toast._jQueryInterface\n})\n$[NAME].noConflict  = () => {\n  $[NAME] = JQUERY_NO_CONFLICT\n  return Toast._jQueryInterface\n}\n\nexport default Toast\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","$","Event","CLICK_DISMISS","PositionClasses","DefaultIcons","DefaultOptions","text","heading","showHideTransition","allowToastClose","hideAfter","loader","loaderBg","stack","position","bgColor","textColor","textAlign","icon","beforeShow","afterShown","beforeHide","afterHidden","Toast","_options","_toastEl","options","prepareOptions","process","Array","setup","addToDom","bindToast","animate","_toastContent","class","i","length","html","css","addClass","inArray","two","_container","left","window","outerWidth","bottom","top","outerHeight","right","that","on","processLoader","e","preventDefault","trigger","fadeOut","slideUp","hide","role","append","isNaN","parseInt","empty","find","remove","ten","Number","_prevToastCount","_extToastCount","slice","canAutoHide","newLocal","milliseconds","transitionTime","style","attr","substring","indexOf","toLowerCase","fadeIn","slideDown","show","setTimeout","suc","option","err","info","warn","reset","resetWhat","update","_jQueryInterface","extend","noConflict"],"mappings":"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"}