{"version":3,"file":"menu.js","sources":["../src/menu.js"],"sourcesContent":["import $ from 'jquery'\nimport Ajax from './ajax'\n\nconst NAME = 'menu'\nconst DATA_KEY = 'lyc.menu'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Event = {\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_CLOSE_DATA_API: `click.close${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst Customer = {\n  MENUID: 'menuid',\n  URL: 'url',\n  NAME: 'name',\n  ICON: 'icon',\n  CLOSE: 'close',\n  SHOW: 'show'\n}\n\nconst HTML_CONTEXT = {\n  HEADER: `<a class=\"home-page\" href=\"#\" \n            data-${Customer.URL}=\"{{${Customer.URL}}}\"\n            data-${Customer.MENUID}=\"{{${Customer.MENUID}}}\">\n            {{${Customer.ICON}}} {{${Customer.NAME}}} \n            {{${Customer.CLOSE}}}\n            </a>`,\n  BODY: `<div class=\"iframe-content\" data-${Customer.MENUID}=\"{{${Customer.MENUID}}}\"></div>`,\n  CLOSE: '<i class=\"cs cs-guanbi\"></i>'\n}\n\nconst Selector = {\n  MENU_HEADER: '#menu-list',\n  MENU_BODY: '#page-content',\n  ACTIVE: 'active',\n  LEFT_MENU: '.metismenu',\n  CLOSE: '.cs.cs-guanbi',\n  BODY_CLASS: '.iframe-content'\n}\n\n/**\n * ------------------------------------------------------------------------\n *  菜单生产\n *  @author lyc\n *  @date 2020年06月04日17:48:50\n * ------------------------------------------------------------------------\n */\nclass Menu {\n  constructor(element) {\n    this._element = element\n    this.init()\n    return this\n  }\n  static get NAME() {\n    return NAME\n  }\n\n  static get Customer() {\n    return Customer\n  }\n\n  // ----------------------------------------------------------------------\n  // 初始化\n  // ----------------------------------------------------------------------\n  init() {\n    const data = $(this._element).data()\n    const $header = $(Selector.MENU_HEADER)\n    const $body = $(Selector.MENU_BODY)\n    if (!data[Customer.URL]) {\n      data[Customer.URL] =  $(this._element).attr('href')\n    }\n    if (!data[Customer.MENUID]) {\n      data[Customer.MENUID] = new Date().getTime()\n      $(this._element).data(Customer.MENUID, data[Customer.MENUID])\n    }\n    if ($header.length === 0 || $body.length === 0 || !data[Customer.URL]) {\n      return\n    }\n    const select = `[data-${Customer.MENUID} = ${data[Customer.MENUID]}]`\n    let $a = $header.find(select)\n    if ($a.length === 0) {\n      // 生产头部\n      let headerDiv = HTML_CONTEXT.HEADER\n      headerDiv = headerDiv.replace(new RegExp(`{{${Customer.URL}}}`, 'g'), data[Customer.URL])\n      headerDiv = headerDiv.replace(new RegExp(`{{${Customer.MENUID}}}`, 'g'), data[Customer.MENUID])\n      headerDiv = headerDiv.replace(new RegExp(`{{${Customer.CLOSE}}}`, 'g'), data[Customer.CLOSE] === false ? '' : HTML_CONTEXT.CLOSE)\n      headerDiv = headerDiv.replace(new RegExp(`{{${Customer.ICON}}}`, 'g'), data[Customer.ICON] ? `<i class =\"${data[Customer.ICON]}\"></i>` : '')\n      headerDiv = headerDiv.replace(new RegExp(`{{${Customer.NAME}}}`, 'g'), data[Customer.NAME])\n      $a = $(headerDiv).appendTo($header)\n    } else {\n      $a.trigger($.Event(Event.CLICK_DATA_API))\n      return\n    }\n\n    let $b = $body.find(select + Selector.BODY_CLASS)\n    if ($b.find(select).length === 0) {\n      // 生产身体\n      let bodyDiv = HTML_CONTEXT.BODY\n      bodyDiv = bodyDiv.replace(new RegExp(`{{${Customer.MENUID}}}`, 'g'), data[Customer.MENUID])\n      $b = $(bodyDiv).appendTo($body)\n      $b.data({\n        ...$b.data(),\n        ...data\n      })\n    }\n    $a.on(Event.CLICK_DATA_API, this.click)\n    // 直接触发\n    $a.trigger($.Event(Event.CLICK_DATA_API))\n    // 关闭标签 的初始化\n    $a.find(Selector.CLOSE).on(Event.CLICK_CLOSE_DATA_API, this.closeLable)\n  }\n\n  // ----------------------------------------------------------------------\n  // i标签关闭功能触发\n  // ----------------------------------------------------------------------\n  closeLable(event) {\n    if (event) {\n      event.preventDefault()\n    }\n    // 1头部操作\n    const $this = $(event.target)\n    const $a = $this.closest('a')\n    const data = $a.data()\n    Menu.close(data[Customer.MENUID])\n  }\n\n  // ----------------------------------------------------------------------\n  // a标签点击功能触发\n  // ----------------------------------------------------------------------\n  click(event) {\n    if (event) {\n      event.preventDefault()\n    }\n    const $this = $(event.currentTarget)\n    const data = $this.data()\n    Menu.open(data[Customer.MENUID])\n  }\n\n  // ----------------------------------------------------------------------\n  // 通过menuid关闭菜单\n  // ----------------------------------------------------------------------\n  static close(menuId) {\n    if (!menuId) {\n      const $header = $(Selector.MENU_HEADER)\n      const $a = $header.find(`a.${Selector.ACTIVE}`)\n      menuId = $a.data(Customer.MENUID)\n    }\n    // 1头部操作\n    const select = `[data-${Customer.MENUID} = ${menuId}]`\n    const $a = $(Selector.MENU_HEADER).find(select)\n    // 关闭之后默认获取最近的一个\n    // eslint-disable-next-line no-nested-ternary\n    const $round = $a.prev().length !== 0 ? $a.prev() : $a.next().length !== 0 ? $a.next() : null\n    const $preva = $a.hasClass(Selector.ACTIVE) ? $round : null\n    const $body = $(Selector.MENU_BODY).find(select + Selector.BODY_CLASS).eq(0)\n    // 关闭自身\n    $a.remove()\n    $body.remove()\n\n    if ($preva && $preva.length !== 0) {\n      $preva.addClass(Selector.ACTIVE)\n      const prevSelect = `[data-${Customer.MENUID} = ${$preva.data(Customer.MENUID)}]${Selector.BODY_CLASS}`\n      const $prevbody = $(Selector.MENU_BODY).find(prevSelect).eq(0)\n      $prevbody.addClass(Selector.ACTIVE)\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  // 通过menuid关闭其他菜单\n  // ----------------------------------------------------------------------\n  static closeOther(menuId) {\n    const $header = $(Selector.MENU_HEADER)\n    if (!menuId) {\n      const $a = $header.find(`a.${Selector.ACTIVE}`)\n      menuId = $a.data(Customer.MENUID)\n    }\n    $header.find('a').each((_index, ele) => {\n      const flag = $(ele).data(Customer.CLOSE)\n      const id = $(ele).data(Customer.MENUID)\n      if (flag !== false && id !== menuId) {\n        Menu.close(id)\n      }\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  // 关闭全部菜单， 除了不可关闭的\n  // ----------------------------------------------------------------------\n  static closeAll() {\n    const $header = $(Selector.MENU_HEADER)\n    $header.find('a').each((_index, ele) => {\n      const flag = $(ele).data(Customer.CLOSE)\n      const menuid = $(ele).data(Customer.MENUID)\n      if (flag !== false) {\n        Menu.close(menuid)\n      }\n    })\n  }\n\n  // ----------------------------------------------------------------------\n  // 通过menuid打开菜单\n  // ----------------------------------------------------------------------\n  static open(menuId, flag) {\n    const $header = $(Selector.MENU_HEADER)\n    if (!menuId) {\n      const $a = $header.find(`a.${Selector.ACTIVE}`)\n      menuId = $a.data(Customer.MENUID)\n    }\n    const select = `[data-${Customer.MENUID} = ${menuId}]`\n    const $this = $(Selector.MENU_HEADER).find(select)\n    // 1.1隐藏其他\n    $this.siblings().removeClass(Selector.ACTIVE)\n    // 1.2显示自己\n    $this.addClass(Selector.ACTIVE)\n    // 1.3关联菜单操作\n    const menu = $(Selector.LEFT_MENU)\n    menu.find('li,a').removeClass(Selector.ACTIVE)\n    const menu$a = menu.find(select).eq(0)\n    menu$a.addClass(Selector.ACTIVE)\n    // 2身体操作\n    const $body = $(Selector.MENU_BODY).find(select + Selector.BODY_CLASS).eq(0)\n    // 2.1隐藏其他\n    $body.siblings().removeClass(Selector.ACTIVE)\n    // 2.2显示自己\n    $body.addClass(Selector.ACTIVE)\n    // ajax 请求页面\n    const bData = $body.data()\n    const show = bData[Customer.SHOW] || false\n    if (!show || flag === true) {\n      Ajax.getHTML(bData[Customer.URL], bData, Menu.suc($body), Menu.err(menuId))\n    }\n  }\n\n  static suc($body) {\n    return (result) => {\n      $body.data(Customer.SHOW, true)\n      $body.html(result).initUI()\n    }\n  }\n\n  static err(menuId) {\n    return () => {\n      Menu.close(menuId)\n    }\n  }\n\n  static _jQueryInterface() {\n    return new Menu(this)\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n$.fn[NAME] = Menu._jQueryInterface\n$.fn[NAME].Constructor = Menu\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Menu._jQueryInterface\n}\n\nexport default Menu\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","Event","CLICK_DATA_API","CLICK_CLOSE_DATA_API","Customer","MENUID","URL","ICON","CLOSE","SHOW","HTML_CONTEXT","HEADER","BODY","Selector","MENU_HEADER","MENU_BODY","ACTIVE","LEFT_MENU","BODY_CLASS","Menu","element","_element","init","data","$header","$body","attr","Date","getTime","length","select","$a","find","headerDiv","replace","RegExp","appendTo","trigger","$b","bodyDiv","on","click","closeLable","event","preventDefault","$this","target","closest","close","currentTarget","open","menuId","$round","prev","next","$preva","hasClass","eq","remove","addClass","prevSelect","$prevbody","closeOther","each","_index","ele","flag","id","closeAll","menuid","siblings","removeClass","menu","menu$a","bData","show","Ajax","getHTML","suc","err","result","html","initUI","_jQueryInterface","Constructor","noConflict"],"mappings":"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"}