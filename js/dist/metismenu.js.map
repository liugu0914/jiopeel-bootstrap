{"version":3,"file":"metismenu.js","sources":["../src/metismenu.js"],"sourcesContent":["import $ from 'jquery'\r\nimport Util from './util'\r\n\r\nconst NAME = 'metisMenu'\r\nconst DATA_KEY = 'metisMenu'\r\nconst EVENT_KEY = `.${DATA_KEY}`\r\nconst DATA_API_KEY = '.data-api'\r\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\r\nconst TRANSITION_DURATION = 350\r\n\r\nconst Default = {\r\n  toggle: true,\r\n  preventDefault: true,\r\n  activeClass: 'active',\r\n  showClass: 'in',\r\n  collapseClass: 'collapse',\r\n  collapseInClass: 'in',\r\n  collapsingClass: 'collapsing',\r\n  triggerElement: 'a',\r\n  parentTrigger: 'li',\r\n  subMenu: 'ul'\r\n}\r\n\r\nconst Event = {\r\n  SHOW: `show${EVENT_KEY}`,\r\n  SHOWN: `shown${EVENT_KEY}`,\r\n  HIDE: `hide${EVENT_KEY}`,\r\n  HIDDEN: `hidden${EVENT_KEY}`,\r\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`\r\n}\r\n\r\n\r\nclass MetisMenu {\r\n  // eslint-disable-line no-shadow\r\n  constructor(element, config) {\r\n    this.element = element\r\n    this.config = {\r\n      ...Default,\r\n      ...config\r\n    }\r\n    this.transitioning = null\r\n\r\n    this.init()\r\n  }\r\n\r\n  init() {\r\n    // eslint-disable-next-line consistent-this\r\n    const self = this\r\n    const conf = this.config\r\n    const el = $(this.element)\r\n\r\n    el.find(`${conf.parentTrigger}.${conf.activeClass}`)\r\n      .children(conf.triggerElement)\r\n      .attr('aria-expanded', 'true') // add attribute aria-expanded=true the trigger element\r\n\r\n    el.find(`${conf.parentTrigger}.${conf.activeClass}`)\r\n      .parents(conf.parentTrigger)\r\n      .addClass(conf.activeClass)\r\n\r\n    el.find(`${conf.parentTrigger}.${conf.activeClass}`)\r\n      .parents(conf.parentTrigger)\r\n      .children(conf.triggerElement)\r\n      .attr('aria-expanded', 'true') // add attribute aria-expanded=true the triggers of all parents\r\n\r\n    el.find(`${conf.parentTrigger}.${conf.activeClass}`)\r\n      .has(conf.subMenu)\r\n      .children(conf.subMenu)\r\n      .addClass(`${conf.collapseClass} ${conf.showClass}`)\r\n\r\n    el.find(conf.parentTrigger)\r\n      .not(`.${conf.activeClass}`)\r\n      .has(conf.subMenu)\r\n      .children(conf.subMenu)\r\n      .addClass(conf.collapseClass)\r\n\r\n    el.find(conf.parentTrigger)\r\n      // .has(conf.subMenu)\r\n      .children(conf.triggerElement)\r\n      .on(Event.CLICK_DATA_API, function (e) { // eslint-disable-line func-names\r\n        const eTar = $(this)\r\n\r\n        if (eTar.attr('aria-disabled') === 'true') {\r\n          return\r\n        }\r\n\r\n        if (conf.preventDefault && eTar.attr('href') === '#') {\r\n          e.preventDefault()\r\n        }\r\n\r\n        const paRent = eTar.parent(conf.parentTrigger)\r\n        const sibLi = paRent.siblings(conf.parentTrigger)\r\n        const sibTrigger = sibLi.children(conf.triggerElement)\r\n\r\n        if (paRent.hasClass(conf.activeClass)) {\r\n          eTar.attr('aria-expanded', 'false')\r\n          self.removeActive(paRent)\r\n        } else {\r\n          eTar.attr('aria-expanded', 'true')\r\n          self.setActive(paRent)\r\n          if (conf.toggle) {\r\n            self.removeActive(sibLi)\r\n            sibTrigger.attr('aria-expanded', 'false')\r\n          }\r\n        }\r\n\r\n        if (conf.onTransitionStart) {\r\n          conf.onTransitionStart(e)\r\n        }\r\n      })\r\n  }\r\n\r\n  setActive(li) {\r\n    $(li).addClass(this.config.activeClass)\r\n    const ul = $(li).children(this.config.subMenu)\r\n    if (ul.length > 0 && !ul.hasClass(this.config.showClass)) {\r\n      this.show(ul)\r\n    }\r\n  }\r\n\r\n  removeActive(li) {\r\n    $(li).removeClass(this.config.activeClass)\r\n    const ul = $(li).children(`${this.config.subMenu}.${this.config.showClass}`)\r\n    if (ul.length > 0) {\r\n      this.hide(ul)\r\n    }\r\n  }\r\n\r\n  show(element) {\r\n    if (this.transitioning || $(element).hasClass(this.config.collapsingClass)) {\r\n      return\r\n    }\r\n    const elem = $(element)\r\n\r\n    const startEvent = $.Event(Event.SHOW)\r\n    elem.trigger(startEvent)\r\n\r\n    if (startEvent.isDefaultPrevented()) {\r\n      return\r\n    }\r\n\r\n    elem.parent(this.config.parentTrigger).addClass(this.config.activeClass)\r\n\r\n    if (this.config.toggle) {\r\n      const toggleElem = elem.parent(this.config.parentTrigger).siblings().children(`${this.config.subMenu}.${this.config.showClass}`)\r\n      this.hide(toggleElem)\r\n    }\r\n\r\n    elem.removeClass(this.config.collapseClass)\r\n      .addClass(this.config.collapsingClass)\r\n      .height(0)\r\n\r\n    this.setTransitioning(true)\r\n\r\n    const complete = () => {\r\n      // check if disposed\r\n      if (!this.config || !this.element) {\r\n        return\r\n      }\r\n      elem.removeClass(this.config.collapsingClass)\r\n        .addClass(`${this.config.collapseClass} ${this.config.showClass}`)\r\n        .height('')\r\n\r\n      this.setTransitioning(false)\r\n\r\n      elem.trigger(Event.SHOWN)\r\n    }\r\n\r\n    elem.height(element[0].scrollHeight)\r\n      .one(Util.TRANSITION_END, complete)\r\n      .emulateTransitionEnd(TRANSITION_DURATION)\r\n  }\r\n\r\n  hide(element) {\r\n    if (\r\n      this.transitioning || !$(element).hasClass(this.config.showClass)\r\n    ) {\r\n      return\r\n    }\r\n\r\n    const elem = $(element)\r\n\r\n    const startEvent = $.Event(Event.HIDE)\r\n    elem.trigger(startEvent)\r\n\r\n    if (startEvent.isDefaultPrevented()) {\r\n      return\r\n    }\r\n\r\n    elem.parent(this.config.parentTrigger).removeClass(this.config.activeClass)\r\n    // eslint-disable-next-line no-unused-expressions\r\n    elem.height(elem.height())[0].offsetHeight\r\n\r\n    elem.addClass(this.config.collapsingClass)\r\n      .removeClass(this.config.collapseClass)\r\n      .removeClass(this.config.showClass)\r\n\r\n    this.setTransitioning(true)\r\n\r\n    const complete = () => {\r\n      // check if disposed\r\n      if (!this.config || !this.element) {\r\n        return\r\n      }\r\n      if (this.transitioning && this.config.onTransitionEnd) {\r\n        this.config.onTransitionEnd()\r\n      }\r\n\r\n      this.setTransitioning(false)\r\n      elem.trigger(Event.HIDDEN)\r\n\r\n      elem.removeClass(this.config.collapsingClass)\r\n        .addClass(this.config.collapseClass)\r\n    }\r\n\r\n    if (elem.height() === 0 || elem.css('display') === 'none') {\r\n      complete()\r\n    } else {\r\n      elem.height(0)\r\n        .one(Util.TRANSITION_END, complete)\r\n        .emulateTransitionEnd(TRANSITION_DURATION)\r\n    }\r\n  }\r\n\r\n  setTransitioning(isTransitioning) {\r\n    this.transitioning = isTransitioning\r\n  }\r\n\r\n  dispose() {\r\n    $.removeData(this.element, DATA_KEY)\r\n\r\n    $(this.element)\r\n      .find(this.config.parentTrigger)\r\n      // .has(this.config.subMenu)\r\n      .children(this.config.triggerElement)\r\n      .off(Event.CLICK_DATA_API)\r\n\r\n    this.transitioning = null\r\n    this.config = null\r\n    this.element = null\r\n  }\r\n\r\n  static jQueryInterface(config) {\r\n    // eslint-disable-next-line func-names\r\n    return this.each(function () {\r\n      const $this = $(this)\r\n      let data = $this.data(DATA_KEY)\r\n      const conf = {\r\n        ...Default,\r\n        ...$this.data(),\r\n        ...typeof config === 'object' && config ? config : {}\r\n      }\r\n\r\n      if (!data) {\r\n        data = new MetisMenu(this, conf)\r\n        $this.data(DATA_KEY, data)\r\n      }\r\n\r\n      if (typeof config === 'string') {\r\n        if (data[config] === undefined) {\r\n          throw new Error(`No method named \"${config}\"`)\r\n        }\r\n        data[config]()\r\n      }\r\n    })\r\n  }\r\n}\r\n/**\r\n * ------------------------------------------------------------------------\r\n * jQuery\r\n * ------------------------------------------------------------------------\r\n */\r\n\r\n$.fn[NAME] = MetisMenu.jQueryInterface // eslint-disable-line no-param-reassign\r\n$.fn[NAME].Constructor = MetisMenu // eslint-disable-line no-param-reassign\r\n$.fn[NAME].noConflict = () => {\r\n  // eslint-disable-line no-param-reassign\r\n  $.fn[NAME] = JQUERY_NO_CONFLICT // eslint-disable-line no-param-reassign\r\n  return MetisMenu.jQueryInterface\r\n}\r\n\r\nexport default MetisMenu\r\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","TRANSITION_DURATION","Default","toggle","preventDefault","activeClass","showClass","collapseClass","collapseInClass","collapsingClass","triggerElement","parentTrigger","subMenu","Event","SHOW","SHOWN","HIDE","HIDDEN","CLICK_DATA_API","MetisMenu","element","config","transitioning","init","self","conf","el","find","children","attr","parents","addClass","has","not","on","e","eTar","paRent","parent","sibLi","siblings","sibTrigger","hasClass","removeActive","setActive","onTransitionStart","li","ul","length","show","removeClass","hide","elem","startEvent","trigger","isDefaultPrevented","toggleElem","height","setTransitioning","complete","scrollHeight","one","Util","TRANSITION_END","emulateTransitionEnd","offsetHeight","onTransitionEnd","css","isTransitioning","dispose","removeData","off","jQueryInterface","each","$this","data","undefined","Error","Constructor","noConflict"],"mappings":"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"}